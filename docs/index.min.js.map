{"version":3,"file":"index.min.js","sources":["../node_modules/.pnpm/svelte@3.59.2/node_modules/svelte/internal/index.mjs","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/functions/Vec3Func.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/Vec3.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/core/Geometry.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/core/Program.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/core/Renderer.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/functions/QuatFunc.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/functions/Vec4Func.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/Quat.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/functions/Mat4Func.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/Mat4.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/Euler.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/functions/EulerFunc.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/core/Transform.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/core/Camera.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/functions/Mat3Func.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/Mat3.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/core/Mesh.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/core/Texture.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/functions/Vec2Func.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/math/Vec2.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/extras/Sphere.js","../node_modules/.pnpm/ogl@1.0.1/node_modules/ogl/src/extras/Orbit.js","../src/gl/loadTextureAsync.mjs","../src/Panorama.svelte","../src/gl/makeCamera.mjs","../src/gl/makeProgram.mjs"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\nfunction is_promise(value) {\n    return !!value && (typeof value === 'object' || typeof value === 'function') && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\nfunction split_css_unit(value) {\n    const split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n    return split ? [parseFloat(split[1]), split[2] || 'px'] : [value, 'px'];\n}\nconst contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\n/**\n * Resize observer singleton.\n * One listener per element only!\n * https://groups.google.com/a/chromium.org/g/blink-dev/c/z6ienONUb5A/m/F5-VcUZtBAAJ\n */\nclass ResizeObserverSingleton {\n    constructor(options) {\n        this.options = options;\n        this._listeners = 'WeakMap' in globals ? new WeakMap() : undefined;\n    }\n    observe(element, listener) {\n        this._listeners.set(element, listener);\n        this._getObserver().observe(element, this.options);\n        return () => {\n            this._listeners.delete(element);\n            this._observer.unobserve(element); // this line can probably be removed\n        };\n    }\n    _getObserver() {\n        var _a;\n        return (_a = this._observer) !== null && _a !== void 0 ? _a : (this._observer = new ResizeObserver((entries) => {\n            var _a;\n            for (const entry of entries) {\n                ResizeObserverSingleton.entries.set(entry.target, entry);\n                (_a = this._listeners.get(entry.target)) === null || _a === void 0 ? void 0 : _a(entry);\n            }\n        }));\n    }\n}\n// Needs to be written like this to pass the tree-shake-test\nResizeObserverSingleton.entries = 'WeakMap' in globals ? new WeakMap() : undefined;\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n    return style.sheet;\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentNode !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    if (node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction comment(content) {\n    return document.createComment(content);\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_immediate_propagation(fn) {\n    return function (event) {\n        event.stopImmediatePropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set && always_set_through_set_attribute.indexOf(key) === -1) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data_map(node, data_map) {\n    Object.keys(data_map).forEach((key) => {\n        set_custom_element_data(node, key, data_map[key]);\n    });\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction set_dynamic_element_data(tag) {\n    return (/-/.test(tag)) ? set_custom_element_data_map : set_attributes;\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction init_binding_group(group) {\n    let _inputs;\n    return {\n        /* push */ p(...inputs) {\n            _inputs = inputs;\n            _inputs.forEach(input => group.push(input));\n        },\n        /* remove */ r() {\n            _inputs.forEach(input => group.splice(group.indexOf(input), 1));\n        }\n    };\n}\nfunction init_binding_group_dynamic(group, indexes) {\n    let _group = get_binding_group(group);\n    let _inputs;\n    function get_binding_group(group) {\n        for (let i = 0; i < indexes.length; i++) {\n            group = group[indexes[i]] = group[indexes[i]] || [];\n        }\n        return group;\n    }\n    function push() {\n        _inputs.forEach(input => _group.push(input));\n    }\n    function remove() {\n        _inputs.forEach(input => _group.splice(_group.indexOf(input), 1));\n    }\n    return {\n        /* update */ u(new_indexes) {\n            indexes = new_indexes;\n            const new_group = get_binding_group(group);\n            if (new_group !== _group) {\n                remove();\n                _group = new_group;\n                push();\n            }\n        },\n        /* push */ p(...inputs) {\n            _inputs = inputs;\n            push();\n        },\n        /* remove */ r: remove\n    };\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction claim_comment(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 8, (node) => {\n        node.data = '' + data;\n        return undefined;\n    }, () => comment(data), true);\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes, is_svg) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration(undefined, is_svg);\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes, is_svg);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    text.data = data;\n}\nfunction set_data_contenteditable(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    text.data = data;\n}\nfunction set_data_maybe_contenteditable(text, data, attr_value) {\n    if (~contenteditable_truthy_values.indexOf(attr_value)) {\n        set_data_contenteditable(text, data);\n    }\n    else {\n        set_data(text, data);\n    }\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value == null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value, mounting) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    if (!mounting || value !== undefined) {\n        select.selectedIndex = -1; // no option should be selected\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked');\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_iframe_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n            // make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n            // see https://github.com/sveltejs/svelte/issues/4233\n            fn();\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nconst resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({ box: 'content-box' });\nconst resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({ box: 'border-box' });\nconst resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton({ box: 'device-pixel-content-box' });\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, cancelable, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nfunction head_selector(nodeId, head) {\n    const result = [];\n    let started = 0;\n    for (const node of head.childNodes) {\n        if (node.nodeType === 8 /* comment node */) {\n            const comment = node.textContent.trim();\n            if (comment === `HEAD_${nodeId}_END`) {\n                started -= 1;\n                result.push(node);\n            }\n            else if (comment === `HEAD_${nodeId}_START`) {\n                started += 1;\n                result.push(node);\n            }\n        }\n        else if (started > 0) {\n            result.push(node);\n        }\n    }\n    return result;\n}\nclass HtmlTag {\n    constructor(is_svg = false) {\n        this.is_svg = false;\n        this.is_svg = is_svg;\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            if (this.is_svg)\n                this.e = svg_element(target.nodeName);\n            /** #7364  target for <template> may be provided as #document-fragment(11) */\n            else\n                this.e = element((target.nodeType === 11 ? 'TEMPLATE' : target.nodeName));\n            this.t = target.tagName !== 'TEMPLATE' ? target : target.content;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes, is_svg = false) {\n        super(is_svg);\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\nfunction construct_svelte_component(component, props) {\n    return new component(props);\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { ownerNode } = info.stylesheet;\n            // there is no ownerNode if it runs on jsdom.\n            if (ownerNode)\n                detach(ownerNode);\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs#run-time-svelte-beforeupdate\n */\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * `onMount` does not run inside a [server-side component](/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs#run-time-svelte-onmount\n */\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n */\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs#run-time-svelte-ondestroy\n */\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * https://svelte.dev/docs#run-time-svelte-createeventdispatcher\n */\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail, { cancelable = false } = {}) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail, { cancelable });\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n            return !event.defaultPrevented;\n        }\n        return true;\n    };\n}\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-setcontext\n */\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n    return context;\n}\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-getcontext\n */\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs#run-time-svelte-getallcontexts\n */\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs#run-time-svelte-hascontext\n */\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nlet render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    // Do not reenter flush while dirty components are updated, as this can\n    // result in an infinite loop. Instead, let the inner flush handle it.\n    // Reentrancy is ok afterwards for bindings etc.\n    if (flushidx !== 0) {\n        return;\n    }\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        try {\n            while (flushidx < dirty_components.length) {\n                const component = dirty_components[flushidx];\n                flushidx++;\n                set_current_component(component);\n                update(component.$$);\n            }\n        }\n        catch (e) {\n            // reset dirty state to not end up in a deadlocked state and then rethrow\n            dirty_components.length = 0;\n            flushidx = 0;\n            throw e;\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n */\nfunction flush_render_callbacks(fns) {\n    const filtered = [];\n    const targets = [];\n    render_callbacks.forEach((c) => fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c));\n    targets.forEach((c) => c());\n    render_callbacks = filtered;\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n    else if (callback) {\n        callback();\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    const options = { direction: 'in' };\n    let config = fn(node, params, options);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config(options);\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    const options = { direction: 'out' };\n    let config = fn(node, params, options);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config(options);\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    const options = { direction: 'both' };\n    let config = fn(node, params, options);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config(options);\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    const updates = [];\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            // defer updates until all the DOM shuffling is done\n            updates.push(() => block.p(child_ctx, dirty));\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    run_all(updates);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\nconst _boolean_attributes = [\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'inert',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n];\n/**\n * List of HTML boolean attributes (e.g. `<input disabled>`).\n * Source: https://html.spec.whatwg.org/multipage/indices.html\n */\nconst boolean_attributes = new Set([..._boolean_attributes]);\n\n/** regex of all html void element names */\nconst void_element_names = /^(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/;\nfunction is_void(name) {\n    return void_element_names.test(name) || name.toLowerCase() === '!doctype';\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst ATTR_REGEX = /[&\"]/g;\nconst CONTENT_REGEX = /[&<]/g;\n/**\n * Note: this method is performance sensitive and has been optimized\n * https://github.com/sveltejs/svelte/pull/5701\n */\nfunction escape(value, is_attr = false) {\n    const str = String(value);\n    const pattern = is_attr ? ATTR_REGEX : CONTENT_REGEX;\n    pattern.lastIndex = 0;\n    let escaped = '';\n    let last = 0;\n    while (pattern.test(str)) {\n        const i = pattern.lastIndex - 1;\n        const ch = str[i];\n        escaped += str.substring(last, i) + (ch === '&' ? '&amp;' : (ch === '\"' ? '&quot;' : '&lt;'));\n        last = i + 1;\n    }\n    return escaped + str.substring(last);\n}\nfunction escape_attribute_value(value) {\n    // keep booleans, null, and undefined for the sake of `spread`\n    const should_escape = typeof value === 'string' || (value && typeof value === 'object');\n    return should_escape ? escape(value, true) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules. Otherwise you may need to fix a <${name}>.`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    const assignment = (boolean && value === true) ? '' : `=\"${escape(value, true)}\"`;\n    return ` ${name}${assignment}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${escape_attribute_value(style_object[key])};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n            // if the component was destroyed immediately\n            // it will update the `$$.on_destroy` reference to `null`.\n            // the destructured on_destroy may still reference to the old array\n            if (component.$$.on_destroy) {\n                component.$$.on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        flush_render_callbacks($$.after_update);\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: [],\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            if (!is_function(callback)) {\n                return noop;\n            }\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        if (!is_function(callback)) {\n            return noop;\n        }\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.59.2' }, detail), { bubbles: true }));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation, has_stop_immediate_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    if (has_stop_immediate_propagation)\n        modifiers.push('stopImmediatePropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction set_data_contenteditable_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction set_data_maybe_contenteditable_dev(text, data, attr_value) {\n    if (~contenteditable_truthy_values.indexOf(attr_value)) {\n        set_data_contenteditable_dev(text, data);\n    }\n    else {\n        set_data_dev(text, data);\n    }\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nfunction validate_dynamic_element(tag) {\n    const is_string = typeof tag === 'string';\n    if (tag && !is_string) {\n        throw new Error('<svelte:element> expects \"this\" attribute to be a string.');\n    }\n}\nfunction validate_void_dynamic_element(tag) {\n    if (tag && is_void(tag)) {\n        console.warn(`<svelte:element this=\"${tag}\"> is self-closing and cannot have content.`);\n    }\n}\nfunction construct_svelte_component_dev(component, props) {\n    const error_message = 'this={...} of <svelte:component> should specify a Svelte component.';\n    try {\n        const instance = new component(props);\n        if (!instance.$$ || !instance.$set || !instance.$on || !instance.$destroy) {\n            throw new Error(error_message);\n        }\n        return instance;\n    }\n    catch (err) {\n        const { message } = err;\n        if (typeof message === 'string' && message.indexOf('is not a constructor') !== -1) {\n            throw new Error(error_message);\n        }\n        else {\n            throw err;\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, ResizeObserverSingleton, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_iframe_resize_listener, add_location, add_render_callback, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_comment, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, comment, component_subscribe, compute_rest_props, compute_slots, construct_svelte_component, construct_svelte_component_dev, contenteditable_truthy_values, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, flush_render_callbacks, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, head_selector, identity, init, init_binding_group, init_binding_group_dynamic, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, is_void, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, resize_observer_border_box, resize_observer_content_box, resize_observer_device_pixel_content_box, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_custom_element_data_map, set_data, set_data_contenteditable, set_data_contenteditable_dev, set_data_dev, set_data_maybe_contenteditable, set_data_maybe_contenteditable_dev, set_dynamic_element_data, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, split_css_unit, spread, src_url_equal, start_hydrating, stop_immediate_propagation, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_dynamic_element, validate_each_argument, validate_each_keys, validate_slots, validate_store, validate_void_dynamic_element, xlink_attr };\n","const EPSILON = 0.000001;\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n}\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n}\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n}\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    let x = b[0] - a[0];\n    let y = b[1] - a[1];\n    let z = b[2] - a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    let x = b[0] - a[0];\n    let y = b[1] - a[1];\n    let z = b[2] - a[2];\n    return x * x + y * y + z * z;\n}\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    return x * x + y * y + z * z;\n}\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n}\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    return out;\n}\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    let len = x * x + y * y + z * z;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n    return out;\n}\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n    let ax = a[0],\n        ay = a[1],\n        az = a[2];\n    let bx = b[0],\n        by = b[1],\n        bz = b[2];\n\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n}\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n    let ax = a[0];\n    let ay = a[1];\n    let az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n}\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n    let x = a[0],\n        y = a[1],\n        z = a[2];\n    let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n}\n\n/**\n * Same as above but doesn't apply translation.\n * Useful for rays.\n */\nexport function scaleRotateMat4(out, a, m) {\n    let x = a[0],\n        y = a[1],\n        z = a[2];\n    let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n    return out;\n}\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n    let x = a[0],\n        y = a[1],\n        z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n}\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n    // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n\n    let x = a[0],\n        y = a[1],\n        z = a[2];\n    let qx = q[0],\n        qy = q[1],\n        qz = q[2],\n        qw = q[3];\n\n    let uvx = qy * z - qz * y;\n    let uvy = qz * x - qx * z;\n    let uvz = qx * y - qy * x;\n\n    let uuvx = qy * uvz - qz * uvy;\n    let uuvy = qz * uvx - qx * uvz;\n    let uuvz = qx * uvy - qy * uvx;\n\n    let w2 = qw * 2;\n    uvx *= w2;\n    uvy *= w2;\n    uvz *= w2;\n\n    uuvx *= 2;\n    uuvy *= 2;\n    uuvz *= 2;\n\n    out[0] = x + uvx + uuvx;\n    out[1] = y + uvy + uuvy;\n    out[2] = z + uvz + uuvz;\n    return out;\n}\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport const angle = (function () {\n    const tempA = [0, 0, 0];\n    const tempB = [0, 0, 0];\n\n    return function (a, b) {\n        copy(tempA, a);\n        copy(tempB, b);\n\n        normalize(tempA, tempA);\n        normalize(tempB, tempB);\n\n        let cosine = dot(tempA, tempB);\n\n        if (cosine > 1.0) {\n            return 0;\n        } else if (cosine < -1.0) {\n            return Math.PI;\n        } else {\n            return Math.acos(cosine);\n        }\n    };\n})();\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n","import * as Vec3Func from './functions/Vec3Func.js';\n\nexport class Vec3 extends Array {\n    constructor(x = 0, y = x, z = x) {\n        super(x, y, z);\n        return this;\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get z() {\n        return this[2];\n    }\n\n    set x(v) {\n        this[0] = v;\n    }\n\n    set y(v) {\n        this[1] = v;\n    }\n\n    set z(v) {\n        this[2] = v;\n    }\n\n    set(x, y = x, z = x) {\n        if (x.length) return this.copy(x);\n        Vec3Func.set(this, x, y, z);\n        return this;\n    }\n\n    copy(v) {\n        Vec3Func.copy(this, v);\n        return this;\n    }\n\n    add(va, vb) {\n        if (vb) Vec3Func.add(this, va, vb);\n        else Vec3Func.add(this, this, va);\n        return this;\n    }\n\n    sub(va, vb) {\n        if (vb) Vec3Func.subtract(this, va, vb);\n        else Vec3Func.subtract(this, this, va);\n        return this;\n    }\n\n    multiply(v) {\n        if (v.length) Vec3Func.multiply(this, this, v);\n        else Vec3Func.scale(this, this, v);\n        return this;\n    }\n\n    divide(v) {\n        if (v.length) Vec3Func.divide(this, this, v);\n        else Vec3Func.scale(this, this, 1 / v);\n        return this;\n    }\n\n    inverse(v = this) {\n        Vec3Func.inverse(this, v);\n        return this;\n    }\n\n    // Can't use 'length' as Array.prototype uses it\n    len() {\n        return Vec3Func.length(this);\n    }\n\n    distance(v) {\n        if (v) return Vec3Func.distance(this, v);\n        else return Vec3Func.length(this);\n    }\n\n    squaredLen() {\n        return Vec3Func.squaredLength(this);\n    }\n\n    squaredDistance(v) {\n        if (v) return Vec3Func.squaredDistance(this, v);\n        else return Vec3Func.squaredLength(this);\n    }\n\n    negate(v = this) {\n        Vec3Func.negate(this, v);\n        return this;\n    }\n\n    cross(va, vb) {\n        if (vb) Vec3Func.cross(this, va, vb);\n        else Vec3Func.cross(this, this, va);\n        return this;\n    }\n\n    scale(v) {\n        Vec3Func.scale(this, this, v);\n        return this;\n    }\n\n    normalize() {\n        Vec3Func.normalize(this, this);\n        return this;\n    }\n\n    dot(v) {\n        return Vec3Func.dot(this, v);\n    }\n\n    equals(v) {\n        return Vec3Func.exactEquals(this, v);\n    }\n\n    applyMatrix3(mat3) {\n        Vec3Func.transformMat3(this, this, mat3);\n        return this;\n    }\n\n    applyMatrix4(mat4) {\n        Vec3Func.transformMat4(this, this, mat4);\n        return this;\n    }\n\n    scaleRotateMatrix4(mat4) {\n        Vec3Func.scaleRotateMat4(this, this, mat4);\n        return this;\n    }\n\n    applyQuaternion(q) {\n        Vec3Func.transformQuat(this, this, q);\n        return this;\n    }\n\n    angle(v) {\n        return Vec3Func.angle(this, v);\n    }\n\n    lerp(v, t) {\n        Vec3Func.lerp(this, this, v, t);\n        return this;\n    }\n\n    clone() {\n        return new Vec3(this[0], this[1], this[2]);\n    }\n\n    fromArray(a, o = 0) {\n        this[0] = a[o];\n        this[1] = a[o + 1];\n        this[2] = a[o + 2];\n        return this;\n    }\n\n    toArray(a = [], o = 0) {\n        a[o] = this[0];\n        a[o + 1] = this[1];\n        a[o + 2] = this[2];\n        return a;\n    }\n\n    transformDirection(mat4) {\n        const x = this[0];\n        const y = this[1];\n        const z = this[2];\n\n        this[0] = mat4[0] * x + mat4[4] * y + mat4[8] * z;\n        this[1] = mat4[1] * x + mat4[5] * y + mat4[9] * z;\n        this[2] = mat4[2] * x + mat4[6] * y + mat4[10] * z;\n\n        return this.normalize();\n    }\n}\n","// attribute params\n// {\n//     data - typed array eg UInt16Array for indices, Float32Array\n//     size - int default 1\n//     instanced - default null. Pass divisor amount\n//     type - gl enum default gl.UNSIGNED_SHORT for 'index', gl.FLOAT for others\n//     normalized - boolean default false\n\n//     buffer - gl buffer, if buffer exists, don't need to provide data - although needs position data for bounds calculation\n//     stride - default 0 - for when passing in buffer\n//     offset - default 0 - for when passing in buffer\n//     count - default null - for when passing in buffer\n//     min - array - for when passing in buffer\n//     max - array - for when passing in buffer\n// }\n\n// TODO: fit in transform feedback\n\nimport { Vec3 } from '../math/Vec3.js';\n\nconst tempVec3 = new Vec3();\n\nlet ID = 1;\nlet ATTR_ID = 1;\n\n// To stop inifinite warnings\nlet isBoundsWarned = false;\n\nexport class Geometry {\n    constructor(gl, attributes = {}) {\n        if (!gl.canvas) console.error('gl not passed as first argument to Geometry');\n        this.gl = gl;\n        this.attributes = attributes;\n        this.id = ID++;\n\n        // Store one VAO per program attribute locations order\n        this.VAOs = {};\n\n        this.drawRange = { start: 0, count: 0 };\n        this.instancedCount = 0;\n\n        // Unbind current VAO so that new buffers don't get added to active mesh\n        this.gl.renderer.bindVertexArray(null);\n        this.gl.renderer.currentGeometry = null;\n\n        // Alias for state store to avoid redundant calls for global state\n        this.glState = this.gl.renderer.state;\n\n        // create the buffers\n        for (let key in attributes) {\n            this.addAttribute(key, attributes[key]);\n        }\n    }\n\n    addAttribute(key, attr) {\n        this.attributes[key] = attr;\n\n        // Set options\n        attr.id = ATTR_ID++; // TODO: currently unused, remove?\n        attr.size = attr.size || 1;\n        attr.type =\n            attr.type ||\n            (attr.data.constructor === Float32Array\n                ? this.gl.FLOAT\n                : attr.data.constructor === Uint16Array\n                ? this.gl.UNSIGNED_SHORT\n                : this.gl.UNSIGNED_INT); // Uint32Array\n        attr.target = key === 'index' ? this.gl.ELEMENT_ARRAY_BUFFER : this.gl.ARRAY_BUFFER;\n        attr.normalized = attr.normalized || false;\n        attr.stride = attr.stride || 0;\n        attr.offset = attr.offset || 0;\n        attr.count = attr.count || (attr.stride ? attr.data.byteLength / attr.stride : attr.data.length / attr.size);\n        attr.divisor = attr.instanced || 0;\n        attr.needsUpdate = false;\n        attr.usage = attr.usage || this.gl.STATIC_DRAW;\n\n        if (!attr.buffer) {\n            // Push data to buffer\n            this.updateAttribute(attr);\n        }\n\n        // Update geometry counts. If indexed, ignore regular attributes\n        if (attr.divisor) {\n            this.isInstanced = true;\n            if (this.instancedCount && this.instancedCount !== attr.count * attr.divisor) {\n                console.warn('geometry has multiple instanced buffers of different length');\n                return (this.instancedCount = Math.min(this.instancedCount, attr.count * attr.divisor));\n            }\n            this.instancedCount = attr.count * attr.divisor;\n        } else if (key === 'index') {\n            this.drawRange.count = attr.count;\n        } else if (!this.attributes.index) {\n            this.drawRange.count = Math.max(this.drawRange.count, attr.count);\n        }\n    }\n\n    updateAttribute(attr) {\n        const isNewBuffer = !attr.buffer;\n        if (isNewBuffer) attr.buffer = this.gl.createBuffer();\n        if (this.glState.boundBuffer !== attr.buffer) {\n            this.gl.bindBuffer(attr.target, attr.buffer);\n            this.glState.boundBuffer = attr.buffer;\n        }\n        if (isNewBuffer) {\n            this.gl.bufferData(attr.target, attr.data, attr.usage);\n        } else {\n            this.gl.bufferSubData(attr.target, 0, attr.data);\n        }\n        attr.needsUpdate = false;\n    }\n\n    setIndex(value) {\n        this.addAttribute('index', value);\n    }\n\n    setDrawRange(start, count) {\n        this.drawRange.start = start;\n        this.drawRange.count = count;\n    }\n\n    setInstancedCount(value) {\n        this.instancedCount = value;\n    }\n\n    createVAO(program) {\n        this.VAOs[program.attributeOrder] = this.gl.renderer.createVertexArray();\n        this.gl.renderer.bindVertexArray(this.VAOs[program.attributeOrder]);\n        this.bindAttributes(program);\n    }\n\n    bindAttributes(program) {\n        // Link all attributes to program using gl.vertexAttribPointer\n        program.attributeLocations.forEach((location, { name, type }) => {\n            // If geometry missing a required shader attribute\n            if (!this.attributes[name]) {\n                console.warn(`active attribute ${name} not being supplied`);\n                return;\n            }\n\n            const attr = this.attributes[name];\n\n            this.gl.bindBuffer(attr.target, attr.buffer);\n            this.glState.boundBuffer = attr.buffer;\n\n            // For matrix attributes, buffer needs to be defined per column\n            let numLoc = 1;\n            if (type === 35674) numLoc = 2; // mat2\n            if (type === 35675) numLoc = 3; // mat3\n            if (type === 35676) numLoc = 4; // mat4\n\n            const size = attr.size / numLoc;\n            const stride = numLoc === 1 ? 0 : numLoc * numLoc * 4;\n            const offset = numLoc === 1 ? 0 : numLoc * 4;\n\n            for (let i = 0; i < numLoc; i++) {\n                this.gl.vertexAttribPointer(location + i, size, attr.type, attr.normalized, attr.stride + stride, attr.offset + i * offset);\n                this.gl.enableVertexAttribArray(location + i);\n\n                // For instanced attributes, divisor needs to be set.\n                // For firefox, need to set back to 0 if non-instanced drawn after instanced. Else won't render\n                this.gl.renderer.vertexAttribDivisor(location + i, attr.divisor);\n            }\n        });\n\n        // Bind indices if geometry indexed\n        if (this.attributes.index) this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.attributes.index.buffer);\n    }\n\n    draw({ program, mode = this.gl.TRIANGLES }) {\n        if (this.gl.renderer.currentGeometry !== `${this.id}_${program.attributeOrder}`) {\n            if (!this.VAOs[program.attributeOrder]) this.createVAO(program);\n            this.gl.renderer.bindVertexArray(this.VAOs[program.attributeOrder]);\n            this.gl.renderer.currentGeometry = `${this.id}_${program.attributeOrder}`;\n        }\n\n        // Check if any attributes need updating\n        program.attributeLocations.forEach((location, { name }) => {\n            const attr = this.attributes[name];\n            if (attr.needsUpdate) this.updateAttribute(attr);\n        });\n\n        // For drawElements, offset needs to be multiple of type size\n        let indexBytesPerElement = 2;\n        if (this.attributes.index?.type === this.gl.UNSIGNED_INT) indexBytesPerElement = 4;\n\n        if (this.isInstanced) {\n            if (this.attributes.index) {\n                this.gl.renderer.drawElementsInstanced(\n                    mode,\n                    this.drawRange.count,\n                    this.attributes.index.type,\n                    this.attributes.index.offset + this.drawRange.start * indexBytesPerElement,\n                    this.instancedCount\n                );\n            } else {\n                this.gl.renderer.drawArraysInstanced(mode, this.drawRange.start, this.drawRange.count, this.instancedCount);\n            }\n        } else {\n            if (this.attributes.index) {\n                this.gl.drawElements(\n                    mode,\n                    this.drawRange.count,\n                    this.attributes.index.type,\n                    this.attributes.index.offset + this.drawRange.start * indexBytesPerElement\n                );\n            } else {\n                this.gl.drawArrays(mode, this.drawRange.start, this.drawRange.count);\n            }\n        }\n    }\n\n    getPosition() {\n        // Use position buffer, or min/max if available\n        const attr = this.attributes.position;\n        // if (attr.min) return [...attr.min, ...attr.max];\n        if (attr.data) return attr;\n        if (isBoundsWarned) return;\n        console.warn('No position buffer data found to compute bounds');\n        return (isBoundsWarned = true);\n    }\n\n    computeBoundingBox(attr) {\n        if (!attr) attr = this.getPosition();\n        const array = attr.data;\n        // Data loaded shouldn't haave stride, only buffers\n        // const stride = attr.stride ? attr.stride / array.BYTES_PER_ELEMENT : attr.size;\n        const stride = attr.size;\n\n        if (!this.bounds) {\n            this.bounds = {\n                min: new Vec3(),\n                max: new Vec3(),\n                center: new Vec3(),\n                scale: new Vec3(),\n                radius: Infinity,\n            };\n        }\n\n        const min = this.bounds.min;\n        const max = this.bounds.max;\n        const center = this.bounds.center;\n        const scale = this.bounds.scale;\n\n        min.set(+Infinity);\n        max.set(-Infinity);\n\n        // TODO: check size of position (eg triangle with Vec2)\n        for (let i = 0, l = array.length; i < l; i += stride) {\n            const x = array[i];\n            const y = array[i + 1];\n            const z = array[i + 2];\n\n            min.x = Math.min(x, min.x);\n            min.y = Math.min(y, min.y);\n            min.z = Math.min(z, min.z);\n\n            max.x = Math.max(x, max.x);\n            max.y = Math.max(y, max.y);\n            max.z = Math.max(z, max.z);\n        }\n\n        scale.sub(max, min);\n        center.add(min, max).divide(2);\n    }\n\n    computeBoundingSphere(attr) {\n        if (!attr) attr = this.getPosition();\n        const array = attr.data;\n        // Data loaded shouldn't haave stride, only buffers\n        // const stride = attr.stride ? attr.stride / array.BYTES_PER_ELEMENT : attr.size;\n        const stride = attr.size;\n\n        if (!this.bounds) this.computeBoundingBox(attr);\n\n        let maxRadiusSq = 0;\n        for (let i = 0, l = array.length; i < l; i += stride) {\n            tempVec3.fromArray(array, i);\n            maxRadiusSq = Math.max(maxRadiusSq, this.bounds.center.squaredDistance(tempVec3));\n        }\n\n        this.bounds.radius = Math.sqrt(maxRadiusSq);\n    }\n\n    remove() {\n        for (let key in this.VAOs) {\n            this.gl.renderer.deleteVertexArray(this.VAOs[key]);\n            delete this.VAOs[key];\n        }\n        for (let key in this.attributes) {\n            this.gl.deleteBuffer(this.attributes[key].buffer);\n            delete this.attributes[key];\n        }\n    }\n}\n","// TODO: upload empty texture if null ? maybe not\n// TODO: upload identity matrix if null ?\n// TODO: sampler Cube\n\nlet ID = 1;\n\n// cache of typed arrays used to flatten uniform arrays\nconst arrayCacheF32 = {};\n\nexport class Program {\n    constructor(\n        gl,\n        {\n            vertex,\n            fragment,\n            uniforms = {},\n\n            transparent = false,\n            cullFace = gl.BACK,\n            frontFace = gl.CCW,\n            depthTest = true,\n            depthWrite = true,\n            depthFunc = gl.LESS,\n        } = {}\n    ) {\n        if (!gl.canvas) console.error('gl not passed as first argument to Program');\n        this.gl = gl;\n        this.uniforms = uniforms;\n        this.id = ID++;\n\n        if (!vertex) console.warn('vertex shader not supplied');\n        if (!fragment) console.warn('fragment shader not supplied');\n\n        // Store program state\n        this.transparent = transparent;\n        this.cullFace = cullFace;\n        this.frontFace = frontFace;\n        this.depthTest = depthTest;\n        this.depthWrite = depthWrite;\n        this.depthFunc = depthFunc;\n        this.blendFunc = {};\n        this.blendEquation = {};\n\n        // set default blendFunc if transparent flagged\n        if (this.transparent && !this.blendFunc.src) {\n            if (this.gl.renderer.premultipliedAlpha) this.setBlendFunc(this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA);\n            else this.setBlendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n        }\n\n        // compile vertex shader and log errors\n        const vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        gl.shaderSource(vertexShader, vertex);\n        gl.compileShader(vertexShader);\n        if (gl.getShaderInfoLog(vertexShader) !== '') {\n            console.warn(`${gl.getShaderInfoLog(vertexShader)}\\nVertex Shader\\n${addLineNumbers(vertex)}`);\n        }\n\n        // compile fragment shader and log errors\n        const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(fragmentShader, fragment);\n        gl.compileShader(fragmentShader);\n        if (gl.getShaderInfoLog(fragmentShader) !== '') {\n            console.warn(`${gl.getShaderInfoLog(fragmentShader)}\\nFragment Shader\\n${addLineNumbers(fragment)}`);\n        }\n\n        // compile program and log errors\n        this.program = gl.createProgram();\n        gl.attachShader(this.program, vertexShader);\n        gl.attachShader(this.program, fragmentShader);\n        gl.linkProgram(this.program);\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            return console.warn(gl.getProgramInfoLog(this.program));\n        }\n\n        // Remove shader once linked\n        gl.deleteShader(vertexShader);\n        gl.deleteShader(fragmentShader);\n\n        // Get active uniform locations\n        this.uniformLocations = new Map();\n        let numUniforms = gl.getProgramParameter(this.program, gl.ACTIVE_UNIFORMS);\n        for (let uIndex = 0; uIndex < numUniforms; uIndex++) {\n            let uniform = gl.getActiveUniform(this.program, uIndex);\n            this.uniformLocations.set(uniform, gl.getUniformLocation(this.program, uniform.name));\n\n            // split uniforms' names to separate array and struct declarations\n            const split = uniform.name.match(/(\\w+)/g);\n\n            uniform.uniformName = split[0];\n            uniform.nameComponents = split.slice(1);\n        }\n\n        // Get active attribute locations\n        this.attributeLocations = new Map();\n        const locations = [];\n        const numAttribs = gl.getProgramParameter(this.program, gl.ACTIVE_ATTRIBUTES);\n        for (let aIndex = 0; aIndex < numAttribs; aIndex++) {\n            const attribute = gl.getActiveAttrib(this.program, aIndex);\n            const location = gl.getAttribLocation(this.program, attribute.name);\n            // Ignore special built-in inputs. eg gl_VertexID, gl_InstanceID\n            if (location === -1) continue;\n            locations[location] = attribute.name;\n            this.attributeLocations.set(attribute, location);\n        }\n        this.attributeOrder = locations.join('');\n    }\n\n    setBlendFunc(src, dst, srcAlpha, dstAlpha) {\n        this.blendFunc.src = src;\n        this.blendFunc.dst = dst;\n        this.blendFunc.srcAlpha = srcAlpha;\n        this.blendFunc.dstAlpha = dstAlpha;\n        if (src) this.transparent = true;\n    }\n\n    setBlendEquation(modeRGB, modeAlpha) {\n        this.blendEquation.modeRGB = modeRGB;\n        this.blendEquation.modeAlpha = modeAlpha;\n    }\n\n    applyState() {\n        if (this.depthTest) this.gl.renderer.enable(this.gl.DEPTH_TEST);\n        else this.gl.renderer.disable(this.gl.DEPTH_TEST);\n\n        if (this.cullFace) this.gl.renderer.enable(this.gl.CULL_FACE);\n        else this.gl.renderer.disable(this.gl.CULL_FACE);\n\n        if (this.blendFunc.src) this.gl.renderer.enable(this.gl.BLEND);\n        else this.gl.renderer.disable(this.gl.BLEND);\n\n        if (this.cullFace) this.gl.renderer.setCullFace(this.cullFace);\n        this.gl.renderer.setFrontFace(this.frontFace);\n        this.gl.renderer.setDepthMask(this.depthWrite);\n        this.gl.renderer.setDepthFunc(this.depthFunc);\n        if (this.blendFunc.src)\n            this.gl.renderer.setBlendFunc(this.blendFunc.src, this.blendFunc.dst, this.blendFunc.srcAlpha, this.blendFunc.dstAlpha);\n        this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB, this.blendEquation.modeAlpha);\n    }\n\n    use({ flipFaces = false } = {}) {\n        let textureUnit = -1;\n        const programActive = this.gl.renderer.state.currentProgram === this.id;\n\n        // Avoid gl call if program already in use\n        if (!programActive) {\n            this.gl.useProgram(this.program);\n            this.gl.renderer.state.currentProgram = this.id;\n        }\n\n        // Set only the active uniforms found in the shader\n        this.uniformLocations.forEach((location, activeUniform) => {\n            let uniform = this.uniforms[activeUniform.uniformName];\n\n            for (const component of activeUniform.nameComponents) {\n                if (!uniform) break;\n\n                if (component in uniform) {\n                    uniform = uniform[component];\n                } else if (Array.isArray(uniform.value)) {\n                    break;\n                } else {\n                    uniform = undefined;\n                    break;\n                }\n            }\n\n            if (!uniform) {\n                return warn(`Active uniform ${activeUniform.name} has not been supplied`);\n            }\n\n            if (uniform && uniform.value === undefined) {\n                return warn(`${activeUniform.name} uniform is missing a value parameter`);\n            }\n\n            if (uniform.value.texture) {\n                textureUnit = textureUnit + 1;\n\n                // Check if texture needs to be updated\n                uniform.value.update(textureUnit);\n                return setUniform(this.gl, activeUniform.type, location, textureUnit);\n            }\n\n            // For texture arrays, set uniform as an array of texture units instead of just one\n            if (uniform.value.length && uniform.value[0].texture) {\n                const textureUnits = [];\n                uniform.value.forEach((value) => {\n                    textureUnit = textureUnit + 1;\n                    value.update(textureUnit);\n                    textureUnits.push(textureUnit);\n                });\n\n                return setUniform(this.gl, activeUniform.type, location, textureUnits);\n            }\n\n            setUniform(this.gl, activeUniform.type, location, uniform.value);\n        });\n\n        this.applyState();\n        if (flipFaces) this.gl.renderer.setFrontFace(this.frontFace === this.gl.CCW ? this.gl.CW : this.gl.CCW);\n    }\n\n    remove() {\n        this.gl.deleteProgram(this.program);\n    }\n}\n\nfunction setUniform(gl, type, location, value) {\n    value = value.length ? flatten(value) : value;\n    const setValue = gl.renderer.state.uniformLocations.get(location);\n\n    // Avoid redundant uniform commands\n    if (value.length) {\n        if (setValue === undefined || setValue.length !== value.length) {\n            // clone array to store as cache\n            gl.renderer.state.uniformLocations.set(location, value.slice(0));\n        } else {\n            if (arraysEqual(setValue, value)) return;\n\n            // Update cached array values\n            setValue.set ? setValue.set(value) : setArray(setValue, value);\n            gl.renderer.state.uniformLocations.set(location, setValue);\n        }\n    } else {\n        if (setValue === value) return;\n        gl.renderer.state.uniformLocations.set(location, value);\n    }\n\n    switch (type) {\n        case 5126:\n            return value.length ? gl.uniform1fv(location, value) : gl.uniform1f(location, value); // FLOAT\n        case 35664:\n            return gl.uniform2fv(location, value); // FLOAT_VEC2\n        case 35665:\n            return gl.uniform3fv(location, value); // FLOAT_VEC3\n        case 35666:\n            return gl.uniform4fv(location, value); // FLOAT_VEC4\n        case 35670: // BOOL\n        case 5124: // INT\n        case 35678: // SAMPLER_2D\n        case 35680:\n            return value.length ? gl.uniform1iv(location, value) : gl.uniform1i(location, value); // SAMPLER_CUBE\n        case 35671: // BOOL_VEC2\n        case 35667:\n            return gl.uniform2iv(location, value); // INT_VEC2\n        case 35672: // BOOL_VEC3\n        case 35668:\n            return gl.uniform3iv(location, value); // INT_VEC3\n        case 35673: // BOOL_VEC4\n        case 35669:\n            return gl.uniform4iv(location, value); // INT_VEC4\n        case 35674:\n            return gl.uniformMatrix2fv(location, false, value); // FLOAT_MAT2\n        case 35675:\n            return gl.uniformMatrix3fv(location, false, value); // FLOAT_MAT3\n        case 35676:\n            return gl.uniformMatrix4fv(location, false, value); // FLOAT_MAT4\n    }\n}\n\nfunction addLineNumbers(string) {\n    let lines = string.split('\\n');\n    for (let i = 0; i < lines.length; i++) {\n        lines[i] = i + 1 + ': ' + lines[i];\n    }\n    return lines.join('\\n');\n}\n\nfunction flatten(a) {\n    const arrayLen = a.length;\n    const valueLen = a[0].length;\n    if (valueLen === undefined) return a;\n    const length = arrayLen * valueLen;\n    let value = arrayCacheF32[length];\n    if (!value) arrayCacheF32[length] = value = new Float32Array(length);\n    for (let i = 0; i < arrayLen; i++) value.set(a[i], i * valueLen);\n    return value;\n}\n\nfunction arraysEqual(a, b) {\n    if (a.length !== b.length) return false;\n    for (let i = 0, l = a.length; i < l; i++) {\n        if (a[i] !== b[i]) return false;\n    }\n    return true;\n}\n\nfunction setArray(a, b) {\n    for (let i = 0, l = a.length; i < l; i++) {\n        a[i] = b[i];\n    }\n}\n\nlet warnCount = 0;\nfunction warn(message) {\n    if (warnCount > 100) return;\n    console.warn(message);\n    warnCount++;\n    if (warnCount > 100) console.warn('More than 100 program warnings - stopping logs.');\n}\n","import { Vec3 } from '../math/Vec3.js';\n\n// TODO: Handle context loss https://www.khronos.org/webgl/wiki/HandlingContextLost\n\n// Not automatic - devs to use these methods manually\n// gl.colorMask( colorMask, colorMask, colorMask, colorMask );\n// gl.clearColor( r, g, b, a );\n// gl.stencilMask( stencilMask );\n// gl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n// gl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n// gl.clearStencil( stencil );\n\nconst tempVec3 = new Vec3();\nlet ID = 1;\n\nexport class Renderer {\n    constructor({\n        canvas = document.createElement('canvas'),\n        width = 300,\n        height = 150,\n        dpr = 1,\n        alpha = false,\n        depth = true,\n        stencil = false,\n        antialias = false,\n        premultipliedAlpha = false,\n        preserveDrawingBuffer = false,\n        powerPreference = 'default',\n        autoClear = true,\n        webgl = 2,\n    } = {}) {\n        const attributes = { alpha, depth, stencil, antialias, premultipliedAlpha, preserveDrawingBuffer, powerPreference };\n        this.dpr = dpr;\n        this.alpha = alpha;\n        this.color = true;\n        this.depth = depth;\n        this.stencil = stencil;\n        this.premultipliedAlpha = premultipliedAlpha;\n        this.autoClear = autoClear;\n        this.id = ID++;\n\n        // Attempt WebGL2 unless forced to 1, if not supported fallback to WebGL1\n        if (webgl === 2) this.gl = canvas.getContext('webgl2', attributes);\n        this.isWebgl2 = !!this.gl;\n        if (!this.gl) this.gl = canvas.getContext('webgl', attributes);\n        if (!this.gl) console.error('unable to create webgl context');\n\n        // Attach renderer to gl so that all classes have access to internal state functions\n        this.gl.renderer = this;\n\n        // initialise size values\n        this.setSize(width, height);\n\n        // gl state stores to avoid redundant calls on methods used internally\n        this.state = {};\n        this.state.blendFunc = { src: this.gl.ONE, dst: this.gl.ZERO };\n        this.state.blendEquation = { modeRGB: this.gl.FUNC_ADD };\n        this.state.cullFace = null;\n        this.state.frontFace = this.gl.CCW;\n        this.state.depthMask = true;\n        this.state.depthFunc = this.gl.LESS;\n        this.state.premultiplyAlpha = false;\n        this.state.flipY = false;\n        this.state.unpackAlignment = 4;\n        this.state.framebuffer = null;\n        this.state.viewport = { x: 0, y: 0, width: null, height: null };\n        this.state.textureUnits = [];\n        this.state.activeTextureUnit = 0;\n        this.state.boundBuffer = null;\n        this.state.uniformLocations = new Map();\n        this.state.currentProgram = null;\n\n        // store requested extensions\n        this.extensions = {};\n\n        // Initialise extra format types\n        if (this.isWebgl2) {\n            this.getExtension('EXT_color_buffer_float');\n            this.getExtension('OES_texture_float_linear');\n        } else {\n            this.getExtension('OES_texture_float');\n            this.getExtension('OES_texture_float_linear');\n            this.getExtension('OES_texture_half_float');\n            this.getExtension('OES_texture_half_float_linear');\n            this.getExtension('OES_element_index_uint');\n            this.getExtension('OES_standard_derivatives');\n            this.getExtension('EXT_sRGB');\n            this.getExtension('WEBGL_depth_texture');\n            this.getExtension('WEBGL_draw_buffers');\n        }\n        this.getExtension('WEBGL_compressed_texture_astc');\n        this.getExtension('EXT_texture_compression_bptc');\n        this.getExtension('WEBGL_compressed_texture_s3tc');\n        this.getExtension('WEBGL_compressed_texture_etc1');\n        this.getExtension('WEBGL_compressed_texture_pvrtc');\n        this.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');\n\n        // Create method aliases using extension (WebGL1) or native if available (WebGL2)\n        this.vertexAttribDivisor = this.getExtension('ANGLE_instanced_arrays', 'vertexAttribDivisor', 'vertexAttribDivisorANGLE');\n        this.drawArraysInstanced = this.getExtension('ANGLE_instanced_arrays', 'drawArraysInstanced', 'drawArraysInstancedANGLE');\n        this.drawElementsInstanced = this.getExtension('ANGLE_instanced_arrays', 'drawElementsInstanced', 'drawElementsInstancedANGLE');\n        this.createVertexArray = this.getExtension('OES_vertex_array_object', 'createVertexArray', 'createVertexArrayOES');\n        this.bindVertexArray = this.getExtension('OES_vertex_array_object', 'bindVertexArray', 'bindVertexArrayOES');\n        this.deleteVertexArray = this.getExtension('OES_vertex_array_object', 'deleteVertexArray', 'deleteVertexArrayOES');\n        this.drawBuffers = this.getExtension('WEBGL_draw_buffers', 'drawBuffers', 'drawBuffersWEBGL');\n\n        // Store device parameters\n        this.parameters = {};\n        this.parameters.maxTextureUnits = this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n        this.parameters.maxAnisotropy = this.getExtension('EXT_texture_filter_anisotropic')\n            ? this.gl.getParameter(this.getExtension('EXT_texture_filter_anisotropic').MAX_TEXTURE_MAX_ANISOTROPY_EXT)\n            : 0;\n    }\n\n    setSize(width, height) {\n        this.width = width;\n        this.height = height;\n\n        this.gl.canvas.width = width * this.dpr;\n        this.gl.canvas.height = height * this.dpr;\n\n        if (!this.gl.canvas.style) return;\n        Object.assign(this.gl.canvas.style, {\n            width: width + 'px',\n            height: height + 'px',\n        });\n    }\n\n    setViewport(width, height, x = 0, y = 0) {\n        if (this.state.viewport.width === width && this.state.viewport.height === height) return;\n        this.state.viewport.width = width;\n        this.state.viewport.height = height;\n        this.state.viewport.x = x;\n        this.state.viewport.y = y;\n        this.gl.viewport(x, y, width, height);\n    }\n\n    setScissor(width, height, x = 0, y = 0) {\n        this.gl.scissor(x, y, width, height);\n    }\n\n    enable(id) {\n        if (this.state[id] === true) return;\n        this.gl.enable(id);\n        this.state[id] = true;\n    }\n\n    disable(id) {\n        if (this.state[id] === false) return;\n        this.gl.disable(id);\n        this.state[id] = false;\n    }\n\n    setBlendFunc(src, dst, srcAlpha, dstAlpha) {\n        if (\n            this.state.blendFunc.src === src &&\n            this.state.blendFunc.dst === dst &&\n            this.state.blendFunc.srcAlpha === srcAlpha &&\n            this.state.blendFunc.dstAlpha === dstAlpha\n        )\n            return;\n        this.state.blendFunc.src = src;\n        this.state.blendFunc.dst = dst;\n        this.state.blendFunc.srcAlpha = srcAlpha;\n        this.state.blendFunc.dstAlpha = dstAlpha;\n        if (srcAlpha !== undefined) this.gl.blendFuncSeparate(src, dst, srcAlpha, dstAlpha);\n        else this.gl.blendFunc(src, dst);\n    }\n\n    setBlendEquation(modeRGB, modeAlpha) {\n        modeRGB = modeRGB || this.gl.FUNC_ADD;\n        if (this.state.blendEquation.modeRGB === modeRGB && this.state.blendEquation.modeAlpha === modeAlpha) return;\n        this.state.blendEquation.modeRGB = modeRGB;\n        this.state.blendEquation.modeAlpha = modeAlpha;\n        if (modeAlpha !== undefined) this.gl.blendEquationSeparate(modeRGB, modeAlpha);\n        else this.gl.blendEquation(modeRGB);\n    }\n\n    setCullFace(value) {\n        if (this.state.cullFace === value) return;\n        this.state.cullFace = value;\n        this.gl.cullFace(value);\n    }\n\n    setFrontFace(value) {\n        if (this.state.frontFace === value) return;\n        this.state.frontFace = value;\n        this.gl.frontFace(value);\n    }\n\n    setDepthMask(value) {\n        if (this.state.depthMask === value) return;\n        this.state.depthMask = value;\n        this.gl.depthMask(value);\n    }\n\n    setDepthFunc(value) {\n        if (this.state.depthFunc === value) return;\n        this.state.depthFunc = value;\n        this.gl.depthFunc(value);\n    }\n\n    activeTexture(value) {\n        if (this.state.activeTextureUnit === value) return;\n        this.state.activeTextureUnit = value;\n        this.gl.activeTexture(this.gl.TEXTURE0 + value);\n    }\n\n    bindFramebuffer({ target = this.gl.FRAMEBUFFER, buffer = null } = {}) {\n        if (this.state.framebuffer === buffer) return;\n        this.state.framebuffer = buffer;\n        this.gl.bindFramebuffer(target, buffer);\n    }\n\n    getExtension(extension, webgl2Func, extFunc) {\n        // if webgl2 function supported, return func bound to gl context\n        if (webgl2Func && this.gl[webgl2Func]) return this.gl[webgl2Func].bind(this.gl);\n\n        // fetch extension once only\n        if (!this.extensions[extension]) {\n            this.extensions[extension] = this.gl.getExtension(extension);\n        }\n\n        // return extension if no function requested\n        if (!webgl2Func) return this.extensions[extension];\n\n        // Return null if extension not supported\n        if (!this.extensions[extension]) return null;\n\n        // return extension function, bound to extension\n        return this.extensions[extension][extFunc].bind(this.extensions[extension]);\n    }\n\n    sortOpaque(a, b) {\n        if (a.renderOrder !== b.renderOrder) {\n            return a.renderOrder - b.renderOrder;\n        } else if (a.program.id !== b.program.id) {\n            return a.program.id - b.program.id;\n        } else if (a.zDepth !== b.zDepth) {\n            return a.zDepth - b.zDepth;\n        } else {\n            return b.id - a.id;\n        }\n    }\n\n    sortTransparent(a, b) {\n        if (a.renderOrder !== b.renderOrder) {\n            return a.renderOrder - b.renderOrder;\n        }\n        if (a.zDepth !== b.zDepth) {\n            return b.zDepth - a.zDepth;\n        } else {\n            return b.id - a.id;\n        }\n    }\n\n    sortUI(a, b) {\n        if (a.renderOrder !== b.renderOrder) {\n            return a.renderOrder - b.renderOrder;\n        } else if (a.program.id !== b.program.id) {\n            return a.program.id - b.program.id;\n        } else {\n            return b.id - a.id;\n        }\n    }\n\n    getRenderList({ scene, camera, frustumCull, sort }) {\n        let renderList = [];\n\n        if (camera && frustumCull) camera.updateFrustum();\n\n        // Get visible\n        scene.traverse((node) => {\n            if (!node.visible) return true;\n            if (!node.draw) return;\n\n            if (frustumCull && node.frustumCulled && camera) {\n                if (!camera.frustumIntersectsMesh(node)) return;\n            }\n\n            renderList.push(node);\n        });\n\n        if (sort) {\n            const opaque = [];\n            const transparent = []; // depthTest true\n            const ui = []; // depthTest false\n\n            renderList.forEach((node) => {\n                // Split into the 3 render groups\n                if (!node.program.transparent) {\n                    opaque.push(node);\n                } else if (node.program.depthTest) {\n                    transparent.push(node);\n                } else {\n                    ui.push(node);\n                }\n\n                node.zDepth = 0;\n\n                // Only calculate z-depth if renderOrder unset and depthTest is true\n                if (node.renderOrder !== 0 || !node.program.depthTest || !camera) return;\n\n                // update z-depth\n                node.worldMatrix.getTranslation(tempVec3);\n                tempVec3.applyMatrix4(camera.projectionViewMatrix);\n                node.zDepth = tempVec3.z;\n            });\n\n            opaque.sort(this.sortOpaque);\n            transparent.sort(this.sortTransparent);\n            ui.sort(this.sortUI);\n\n            renderList = opaque.concat(transparent, ui);\n        }\n\n        return renderList;\n    }\n\n    render({ scene, camera, target = null, update = true, sort = true, frustumCull = true, clear }) {\n        if (target === null) {\n            // make sure no render target bound so draws to canvas\n            this.bindFramebuffer();\n            this.setViewport(this.width * this.dpr, this.height * this.dpr);\n        } else {\n            // bind supplied render target and update viewport\n            this.bindFramebuffer(target);\n            this.setViewport(target.width, target.height);\n        }\n\n        if (clear || (this.autoClear && clear !== false)) {\n            // Ensure depth buffer writing is enabled so it can be cleared\n            if (this.depth && (!target || target.depth)) {\n                this.enable(this.gl.DEPTH_TEST);\n                this.setDepthMask(true);\n            }\n            this.gl.clear(\n                (this.color ? this.gl.COLOR_BUFFER_BIT : 0) |\n                    (this.depth ? this.gl.DEPTH_BUFFER_BIT : 0) |\n                    (this.stencil ? this.gl.STENCIL_BUFFER_BIT : 0)\n            );\n        }\n\n        // updates all scene graph matrices\n        if (update) scene.updateMatrixWorld();\n\n        // Update camera separately, in case not in scene graph\n        if (camera) camera.updateMatrixWorld();\n\n        // Get render list - entails culling and sorting\n        const renderList = this.getRenderList({ scene, camera, frustumCull, sort });\n\n        renderList.forEach((node) => {\n            node.draw({ camera });\n        });\n    }\n}\n","import * as vec4 from './Vec4Func.js';\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function identity(out) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n}\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {vec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nexport function setAxisAngle(out, axis, rad) {\n    rad = rad * 0.5;\n    let s = Math.sin(rad);\n    out[0] = s * axis[0];\n    out[1] = s * axis[1];\n    out[2] = s * axis[2];\n    out[3] = Math.cos(rad);\n    return out;\n}\n\n/**\n * Multiplies two quats\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n */\nexport function multiply(out, a, b) {\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let bx = b[0],\n        by = b[1],\n        bz = b[2],\n        bw = b[3];\n\n    out[0] = ax * bw + aw * bx + ay * bz - az * by;\n    out[1] = ay * bw + aw * by + az * bx - ax * bz;\n    out[2] = az * bw + aw * bz + ax * by - ay * bx;\n    out[3] = aw * bw - ax * bx - ay * by - az * bz;\n    return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateX(out, a, rad) {\n    rad *= 0.5;\n\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let bx = Math.sin(rad),\n        bw = Math.cos(rad);\n\n    out[0] = ax * bw + aw * bx;\n    out[1] = ay * bw + az * bx;\n    out[2] = az * bw - ay * bx;\n    out[3] = aw * bw - ax * bx;\n    return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateY(out, a, rad) {\n    rad *= 0.5;\n\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let by = Math.sin(rad),\n        bw = Math.cos(rad);\n\n    out[0] = ax * bw - az * by;\n    out[1] = ay * bw + aw * by;\n    out[2] = az * bw + ax * by;\n    out[3] = aw * bw - ay * by;\n    return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateZ(out, a, rad) {\n    rad *= 0.5;\n\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let bz = Math.sin(rad),\n        bw = Math.cos(rad);\n\n    out[0] = ax * bw + ay * bz;\n    out[1] = ay * bw - ax * bz;\n    out[2] = az * bw + aw * bz;\n    out[3] = aw * bw - az * bz;\n    return out;\n}\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n */\nexport function slerp(out, a, b, t) {\n    // benchmarks:\n    //    http://jsperf.com/quaternion-slerp-implementations\n    let ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    let bx = b[0],\n        by = b[1],\n        bz = b[2],\n        bw = b[3];\n\n    let omega, cosom, sinom, scale0, scale1;\n\n    // calc cosine\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n    // adjust signs (if necessary)\n    if (cosom < 0.0) {\n        cosom = -cosom;\n        bx = -bx;\n        by = -by;\n        bz = -bz;\n        bw = -bw;\n    }\n    // calculate coefficients\n    if (1.0 - cosom > 0.000001) {\n        // standard case (slerp)\n        omega = Math.acos(cosom);\n        sinom = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    } else {\n        // \"from\" and \"to\" quaternions are very close\n        //  ... so we can do a linear interpolation\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n    // calculate final values\n    out[0] = scale0 * ax + scale1 * bx;\n    out[1] = scale0 * ay + scale1 * by;\n    out[2] = scale0 * az + scale1 * bz;\n    out[3] = scale0 * aw + scale1 * bw;\n\n    return out;\n}\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate inverse of\n * @returns {quat} out\n */\nexport function invert(out, a) {\n    let a0 = a[0],\n        a1 = a[1],\n        a2 = a[2],\n        a3 = a[3];\n    let dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n    let invDot = dot ? 1.0 / dot : 0;\n\n    // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n    out[0] = -a0 * invDot;\n    out[1] = -a1 * invDot;\n    out[2] = -a2 * invDot;\n    out[3] = a3 * invDot;\n    return out;\n}\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nexport function conjugate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = a[3];\n    return out;\n}\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {mat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nexport function fromMat3(out, m) {\n    // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n    // article \"Quaternion Calculus and Fast Animation\".\n    let fTrace = m[0] + m[4] + m[8];\n    let fRoot;\n\n    if (fTrace > 0.0) {\n        // |w| > 1/2, may as well choose w > 1/2\n        fRoot = Math.sqrt(fTrace + 1.0); // 2w\n        out[3] = 0.5 * fRoot;\n        fRoot = 0.5 / fRoot; // 1/(4w)\n        out[0] = (m[5] - m[7]) * fRoot;\n        out[1] = (m[6] - m[2]) * fRoot;\n        out[2] = (m[1] - m[3]) * fRoot;\n    } else {\n        // |w| <= 1/2\n        let i = 0;\n        if (m[4] > m[0]) i = 1;\n        if (m[8] > m[i * 3 + i]) i = 2;\n        let j = (i + 1) % 3;\n        let k = (i + 2) % 3;\n\n        fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n        out[i] = 0.5 * fRoot;\n        fRoot = 0.5 / fRoot;\n        out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n        out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n        out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n    }\n\n    return out;\n}\n\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {vec3} euler Angles to rotate around each axis in degrees.\n * @param {String} order detailing order of operations. Default 'XYZ'.\n * @returns {quat} out\n * @function\n */\nexport function fromEuler(out, euler, order = 'YXZ') {\n    let sx = Math.sin(euler[0] * 0.5);\n    let cx = Math.cos(euler[0] * 0.5);\n    let sy = Math.sin(euler[1] * 0.5);\n    let cy = Math.cos(euler[1] * 0.5);\n    let sz = Math.sin(euler[2] * 0.5);\n    let cz = Math.cos(euler[2] * 0.5);\n\n    if (order === 'XYZ') {\n        out[0] = sx * cy * cz + cx * sy * sz;\n        out[1] = cx * sy * cz - sx * cy * sz;\n        out[2] = cx * cy * sz + sx * sy * cz;\n        out[3] = cx * cy * cz - sx * sy * sz;\n    } else if (order === 'YXZ') {\n        out[0] = sx * cy * cz + cx * sy * sz;\n        out[1] = cx * sy * cz - sx * cy * sz;\n        out[2] = cx * cy * sz - sx * sy * cz;\n        out[3] = cx * cy * cz + sx * sy * sz;\n    } else if (order === 'ZXY') {\n        out[0] = sx * cy * cz - cx * sy * sz;\n        out[1] = cx * sy * cz + sx * cy * sz;\n        out[2] = cx * cy * sz + sx * sy * cz;\n        out[3] = cx * cy * cz - sx * sy * sz;\n    } else if (order === 'ZYX') {\n        out[0] = sx * cy * cz - cx * sy * sz;\n        out[1] = cx * sy * cz + sx * cy * sz;\n        out[2] = cx * cy * sz - sx * sy * cz;\n        out[3] = cx * cy * cz + sx * sy * sz;\n    } else if (order === 'YZX') {\n        out[0] = sx * cy * cz + cx * sy * sz;\n        out[1] = cx * sy * cz + sx * cy * sz;\n        out[2] = cx * cy * sz - sx * sy * cz;\n        out[3] = cx * cy * cz - sx * sy * sz;\n    } else if (order === 'XZY') {\n        out[0] = sx * cy * cz - cx * sy * sz;\n        out[1] = cx * sy * cz - sx * cy * sz;\n        out[2] = cx * cy * sz + sx * sy * cz;\n        out[3] = cx * cy * cz + sx * sy * sz;\n    }\n\n    return out;\n}\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nexport const copy = vec4.copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nexport const set = vec4.set;\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n * @function\n */\nexport const add = vec4.add;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {quat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nexport const scale = vec4.scale;\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nexport const dot = vec4.dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n * @function\n */\nexport const lerp = vec4.lerp;\n\n/**\n * Calculates the length of a quat\n *\n * @param {quat} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport const length = vec4.length;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nexport const normalize = vec4.normalize;\n","const EPSILON = 0.000001;\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the source vector\n * @returns {vec4} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nexport function set(out, x, y, z, w) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n}\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    return out;\n}\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    return out;\n}\n\n/**\n * Calculates the length of a vec4\n *\n * @param {vec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    let w = a[3];\n    return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to normalize\n * @returns {vec4} out\n */\nexport function normalize(out, a) {\n    let x = a[0];\n    let y = a[1];\n    let z = a[2];\n    let w = a[3];\n    let len = x * x + y * y + z * z + w * w;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n    return out;\n}\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec4} out\n */\nexport function lerp(out, a, b, t) {\n    let ax = a[0];\n    let ay = a[1];\n    let az = a[2];\n    let aw = a[3];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    out[3] = aw + t * (b[3] - aw);\n    return out;\n}\n","import * as QuatFunc from './functions/QuatFunc.js';\n\nexport class Quat extends Array {\n    constructor(x = 0, y = 0, z = 0, w = 1) {\n        super(x, y, z, w);\n        this.onChange = () => {};\n        return this;\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get z() {\n        return this[2];\n    }\n\n    get w() {\n        return this[3];\n    }\n\n    set x(v) {\n        this[0] = v;\n        this.onChange();\n    }\n\n    set y(v) {\n        this[1] = v;\n        this.onChange();\n    }\n\n    set z(v) {\n        this[2] = v;\n        this.onChange();\n    }\n\n    set w(v) {\n        this[3] = v;\n        this.onChange();\n    }\n\n    identity() {\n        QuatFunc.identity(this);\n        this.onChange();\n        return this;\n    }\n\n    set(x, y, z, w) {\n        if (x.length) return this.copy(x);\n        QuatFunc.set(this, x, y, z, w);\n        this.onChange();\n        return this;\n    }\n\n    rotateX(a) {\n        QuatFunc.rotateX(this, this, a);\n        this.onChange();\n        return this;\n    }\n\n    rotateY(a) {\n        QuatFunc.rotateY(this, this, a);\n        this.onChange();\n        return this;\n    }\n\n    rotateZ(a) {\n        QuatFunc.rotateZ(this, this, a);\n        this.onChange();\n        return this;\n    }\n\n    inverse(q = this) {\n        QuatFunc.invert(this, q);\n        this.onChange();\n        return this;\n    }\n\n    conjugate(q = this) {\n        QuatFunc.conjugate(this, q);\n        this.onChange();\n        return this;\n    }\n\n    copy(q) {\n        QuatFunc.copy(this, q);\n        this.onChange();\n        return this;\n    }\n\n    normalize(q = this) {\n        QuatFunc.normalize(this, q);\n        this.onChange();\n        return this;\n    }\n\n    multiply(qA, qB) {\n        if (qB) {\n            QuatFunc.multiply(this, qA, qB);\n        } else {\n            QuatFunc.multiply(this, this, qA);\n        }\n        this.onChange();\n        return this;\n    }\n\n    dot(v) {\n        return QuatFunc.dot(this, v);\n    }\n\n    fromMatrix3(matrix3) {\n        QuatFunc.fromMat3(this, matrix3);\n        this.onChange();\n        return this;\n    }\n\n    fromEuler(euler) {\n        QuatFunc.fromEuler(this, euler, euler.order);\n        return this;\n    }\n\n    fromAxisAngle(axis, a) {\n        QuatFunc.setAxisAngle(this, axis, a);\n        this.onChange();\n        return this;\n    }\n\n    slerp(q, t) {\n        QuatFunc.slerp(this, this, q, t);\n        this.onChange();\n        return this;\n    }\n\n    fromArray(a, o = 0) {\n        this[0] = a[o];\n        this[1] = a[o + 1];\n        this[2] = a[o + 2];\n        this[3] = a[o + 3];\n        this.onChange();\n        return this;\n    }\n\n    toArray(a = [], o = 0) {\n        a[o] = this[0];\n        a[o + 1] = this[1];\n        a[o + 2] = this[2];\n        a[o + 3] = this[3];\n        return a;\n    }\n}\n","const EPSILON = 0.000001;\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        let a01 = a[1],\n            a02 = a[2],\n            a03 = a[3];\n        let a12 = a[6],\n            a13 = a[7];\n        let a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n\n    return out;\n}\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nexport function invert(out, a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    let a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n    let a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n    let a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    let b00 = a00 * a11 - a01 * a10;\n    let b01 = a00 * a12 - a02 * a10;\n    let b02 = a00 * a13 - a03 * a10;\n    let b03 = a01 * a12 - a02 * a11;\n    let b04 = a01 * a13 - a03 * a11;\n    let b05 = a02 * a13 - a03 * a12;\n    let b06 = a20 * a31 - a21 * a30;\n    let b07 = a20 * a32 - a22 * a30;\n    let b08 = a20 * a33 - a23 * a30;\n    let b09 = a21 * a32 - a22 * a31;\n    let b10 = a21 * a33 - a23 * a31;\n    let b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n}\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    let a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n    let a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n    let a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    let b00 = a00 * a11 - a01 * a10;\n    let b01 = a00 * a12 - a02 * a10;\n    let b02 = a00 * a13 - a03 * a10;\n    let b03 = a01 * a12 - a02 * a11;\n    let b04 = a01 * a13 - a03 * a11;\n    let b05 = a02 * a13 - a03 * a12;\n    let b06 = a20 * a31 - a21 * a30;\n    let b07 = a20 * a32 - a22 * a30;\n    let b08 = a20 * a33 - a23 * a30;\n    let b09 = a21 * a32 - a22 * a31;\n    let b10 = a21 * a33 - a23 * a31;\n    let b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    let a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n    let a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n    let a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    let b0 = b[0],\n        b1 = b[1],\n        b2 = b[2],\n        b3 = b[3];\n    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n    b0 = b[4];\n    b1 = b[5];\n    b2 = b[6];\n    b3 = b[7];\n    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n    b0 = b[8];\n    b1 = b[9];\n    b2 = b[10];\n    b3 = b[11];\n    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n\n    b0 = b[12];\n    b1 = b[13];\n    b2 = b[14];\n    b3 = b[15];\n    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    return out;\n}\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n    let x = v[0],\n        y = v[1],\n        z = v[2];\n    let a00, a01, a02, a03;\n    let a10, a11, a12, a13;\n    let a20, a21, a22, a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0];\n        a01 = a[1];\n        a02 = a[2];\n        a03 = a[3];\n        a10 = a[4];\n        a11 = a[5];\n        a12 = a[6];\n        a13 = a[7];\n        a20 = a[8];\n        a21 = a[9];\n        a22 = a[10];\n        a23 = a[11];\n\n        out[0] = a00;\n        out[1] = a01;\n        out[2] = a02;\n        out[3] = a03;\n        out[4] = a10;\n        out[5] = a11;\n        out[6] = a12;\n        out[7] = a13;\n        out[8] = a20;\n        out[9] = a21;\n        out[10] = a22;\n        out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n}\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nexport function scale(out, a, v) {\n    let x = v[0],\n        y = v[1],\n        z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n    let x = axis[0],\n        y = axis[1],\n        z = axis[2];\n    let len = Math.hypot(x, y, z);\n    let s, c, t;\n    let a00, a01, a02, a03;\n    let a10, a11, a12, a13;\n    let a20, a21, a22, a23;\n    let b00, b01, b02;\n    let b10, b11, b12;\n    let b20, b21, b22;\n\n    if (Math.abs(len) < EPSILON) {\n        return null;\n    }\n\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c;\n    b01 = y * x * t + z * s;\n    b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s;\n    b11 = y * y * t + c;\n    b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s;\n    b21 = y * z * t - x * s;\n    b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n}\n\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n    out[0] = mat[12];\n    out[1] = mat[13];\n    out[2] = mat[14];\n\n    return out;\n}\n\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {mat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n    let m11 = mat[0];\n    let m12 = mat[1];\n    let m13 = mat[2];\n    let m21 = mat[4];\n    let m22 = mat[5];\n    let m23 = mat[6];\n    let m31 = mat[8];\n    let m32 = mat[9];\n    let m33 = mat[10];\n\n    out[0] = Math.hypot(m11, m12, m13);\n    out[1] = Math.hypot(m21, m22, m23);\n    out[2] = Math.hypot(m31, m32, m33);\n\n    return out;\n}\n\nexport function getMaxScaleOnAxis(mat) {\n    let m11 = mat[0];\n    let m12 = mat[1];\n    let m13 = mat[2];\n    let m21 = mat[4];\n    let m22 = mat[5];\n    let m23 = mat[6];\n    let m31 = mat[8];\n    let m32 = mat[9];\n    let m33 = mat[10];\n\n    const x = m11 * m11 + m12 * m12 + m13 * m13;\n    const y = m21 * m21 + m22 * m22 + m23 * m23;\n    const z = m31 * m31 + m32 * m32 + m33 * m33;\n\n    return Math.sqrt(Math.max(x, y, z));\n}\n\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {mat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport const getRotation = (function () {\n    const temp = [1, 1, 1];\n\n    return function (out, mat) {\n        let scaling = temp;\n        getScaling(scaling, mat);\n\n        let is1 = 1 / scaling[0];\n        let is2 = 1 / scaling[1];\n        let is3 = 1 / scaling[2];\n\n        let sm11 = mat[0] * is1;\n        let sm12 = mat[1] * is2;\n        let sm13 = mat[2] * is3;\n        let sm21 = mat[4] * is1;\n        let sm22 = mat[5] * is2;\n        let sm23 = mat[6] * is3;\n        let sm31 = mat[8] * is1;\n        let sm32 = mat[9] * is2;\n        let sm33 = mat[10] * is3;\n\n        let trace = sm11 + sm22 + sm33;\n        let S = 0;\n\n        if (trace > 0) {\n            S = Math.sqrt(trace + 1.0) * 2;\n            out[3] = 0.25 * S;\n            out[0] = (sm23 - sm32) / S;\n            out[1] = (sm31 - sm13) / S;\n            out[2] = (sm12 - sm21) / S;\n        } else if (sm11 > sm22 && sm11 > sm33) {\n            S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n            out[3] = (sm23 - sm32) / S;\n            out[0] = 0.25 * S;\n            out[1] = (sm12 + sm21) / S;\n            out[2] = (sm31 + sm13) / S;\n        } else if (sm22 > sm33) {\n            S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n            out[3] = (sm31 - sm13) / S;\n            out[0] = (sm12 + sm21) / S;\n            out[1] = 0.25 * S;\n            out[2] = (sm23 + sm32) / S;\n        } else {\n            S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n            out[3] = (sm12 - sm21) / S;\n            out[0] = (sm31 + sm13) / S;\n            out[1] = (sm23 + sm32) / S;\n            out[2] = 0.25 * S;\n        }\n\n        return out;\n    };\n})();\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @param {vec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n    // Quaternion math\n    let x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3];\n    let x2 = x + x;\n    let y2 = y + y;\n    let z2 = z + z;\n\n    let xx = x * x2;\n    let xy = x * y2;\n    let xz = x * z2;\n    let yy = y * y2;\n    let yz = y * z2;\n    let zz = z * z2;\n    let wx = w * x2;\n    let wy = w * y2;\n    let wz = w * z2;\n    let sx = s[0];\n    let sy = s[1];\n    let sz = s[2];\n\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n\n    return out;\n}\n\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n    let x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3];\n    let x2 = x + x;\n    let y2 = y + y;\n    let z2 = z + z;\n\n    let xx = x * x2;\n    let yx = y * x2;\n    let yy = y * y2;\n    let zx = z * x2;\n    let zy = z * y2;\n    let zz = z * z2;\n    let wx = w * x2;\n    let wy = w * y2;\n    let wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n\n    return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspective(out, fovy, aspect, near, far) {\n    let f = 1.0 / Math.tan(fovy / 2);\n    let nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 2 * far * near * nf;\n    out[15] = 0;\n    return out;\n}\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function ortho(out, left, right, bottom, top, near, far) {\n    let lr = 1 / (left - right);\n    let bt = 1 / (bottom - top);\n    let nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} target Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function targetTo(out, eye, target, up) {\n    let eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2];\n\n    let z0 = eyex - target[0],\n        z1 = eyey - target[1],\n        z2 = eyez - target[2];\n\n    let len = z0 * z0 + z1 * z1 + z2 * z2;\n    if (len === 0) {\n        // eye and target are in the same position\n        z2 = 1;\n    } else {\n        len = 1 / Math.sqrt(len);\n        z0 *= len;\n        z1 *= len;\n        z2 *= len;\n    }\n\n    let x0 = upy * z2 - upz * z1,\n        x1 = upz * z0 - upx * z2,\n        x2 = upx * z1 - upy * z0;\n\n    len = x0 * x0 + x1 * x1 + x2 * x2;\n    if (len === 0) {\n        // up and z are parallel\n        if (upz) {\n            upx += 1e-6;\n        } else if (upy) {\n            upz += 1e-6;\n        } else {\n            upy += 1e-6;\n        }\n        (x0 = upy * z2 - upz * z1), (x1 = upz * z0 - upx * z2), (x2 = upx * z1 - upy * z0);\n\n        len = x0 * x0 + x1 * x1 + x2 * x2;\n    }\n\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n\n    out[0] = x0;\n    out[1] = x1;\n    out[2] = x2;\n    out[3] = 0;\n    out[4] = z1 * x2 - z2 * x1;\n    out[5] = z2 * x0 - z0 * x2;\n    out[6] = z0 * x1 - z1 * x0;\n    out[7] = 0;\n    out[8] = z0;\n    out[9] = z1;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = eyex;\n    out[13] = eyey;\n    out[14] = eyez;\n    out[15] = 1;\n    return out;\n}\n\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    out[4] = a[4] + b[4];\n    out[5] = a[5] + b[5];\n    out[6] = a[6] + b[6];\n    out[7] = a[7] + b[7];\n    out[8] = a[8] + b[8];\n    out[9] = a[9] + b[9];\n    out[10] = a[10] + b[10];\n    out[11] = a[11] + b[11];\n    out[12] = a[12] + b[12];\n    out[13] = a[13] + b[13];\n    out[14] = a[14] + b[14];\n    out[15] = a[15] + b[15];\n    return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    out[4] = a[4] - b[4];\n    out[5] = a[5] - b[5];\n    out[6] = a[6] - b[6];\n    out[7] = a[7] - b[7];\n    out[8] = a[8] - b[8];\n    out[9] = a[9] - b[9];\n    out[10] = a[10] - b[10];\n    out[11] = a[11] - b[11];\n    out[12] = a[12] - b[12];\n    out[13] = a[13] - b[13];\n    out[14] = a[14] - b[14];\n    out[15] = a[15] - b[15];\n    return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    out[4] = a[4] * b;\n    out[5] = a[5] * b;\n    out[6] = a[6] * b;\n    out[7] = a[7] * b;\n    out[8] = a[8] * b;\n    out[9] = a[9] * b;\n    out[10] = a[10] * b;\n    out[11] = a[11] * b;\n    out[12] = a[12] * b;\n    out[13] = a[13] * b;\n    out[14] = a[14] * b;\n    out[15] = a[15] * b;\n    return out;\n}\n","import * as Mat4Func from './functions/Mat4Func.js';\n\nexport class Mat4 extends Array {\n    constructor(\n        m00 = 1,\n        m01 = 0,\n        m02 = 0,\n        m03 = 0,\n        m10 = 0,\n        m11 = 1,\n        m12 = 0,\n        m13 = 0,\n        m20 = 0,\n        m21 = 0,\n        m22 = 1,\n        m23 = 0,\n        m30 = 0,\n        m31 = 0,\n        m32 = 0,\n        m33 = 1\n    ) {\n        super(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n        return this;\n    }\n\n    get x() {\n        return this[12];\n    }\n\n    get y() {\n        return this[13];\n    }\n\n    get z() {\n        return this[14];\n    }\n\n    get w() {\n        return this[15];\n    }\n\n    set x(v) {\n        this[12] = v;\n    }\n\n    set y(v) {\n        this[13] = v;\n    }\n\n    set z(v) {\n        this[14] = v;\n    }\n\n    set w(v) {\n        this[15] = v;\n    }\n\n    set(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n        if (m00.length) return this.copy(m00);\n        Mat4Func.set(this, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33);\n        return this;\n    }\n\n    translate(v, m = this) {\n        Mat4Func.translate(this, m, v);\n        return this;\n    }\n\n    rotate(v, axis, m = this) {\n        Mat4Func.rotate(this, m, v, axis);\n        return this;\n    }\n\n    scale(v, m = this) {\n        Mat4Func.scale(this, m, typeof v === 'number' ? [v, v, v] : v);\n        return this;\n    }\n\n    add(ma, mb) {\n        if (mb) Mat4Func.add(this, ma, mb);\n        else Mat4Func.add(this, this, ma);\n        return this;\n    }\n\n    sub(ma, mb) {\n        if (mb) Mat4Func.subtract(this, ma, mb);\n        else Mat4Func.subtract(this, this, ma);\n        return this;\n    }\n\n    multiply(ma, mb) {\n        if (!ma.length) {\n            Mat4Func.multiplyScalar(this, this, ma);\n        } else if (mb) {\n            Mat4Func.multiply(this, ma, mb);\n        } else {\n            Mat4Func.multiply(this, this, ma);\n        }\n        return this;\n    }\n\n    identity() {\n        Mat4Func.identity(this);\n        return this;\n    }\n\n    copy(m) {\n        Mat4Func.copy(this, m);\n        return this;\n    }\n\n    fromPerspective({ fov, aspect, near, far } = {}) {\n        Mat4Func.perspective(this, fov, aspect, near, far);\n        return this;\n    }\n\n    fromOrthogonal({ left, right, bottom, top, near, far }) {\n        Mat4Func.ortho(this, left, right, bottom, top, near, far);\n        return this;\n    }\n\n    fromQuaternion(q) {\n        Mat4Func.fromQuat(this, q);\n        return this;\n    }\n\n    setPosition(v) {\n        this.x = v[0];\n        this.y = v[1];\n        this.z = v[2];\n        return this;\n    }\n\n    inverse(m = this) {\n        Mat4Func.invert(this, m);\n        return this;\n    }\n\n    compose(q, pos, scale) {\n        Mat4Func.fromRotationTranslationScale(this, q, pos, scale);\n        return this;\n    }\n\n    getRotation(q) {\n        Mat4Func.getRotation(q, this);\n        return this;\n    }\n\n    getTranslation(pos) {\n        Mat4Func.getTranslation(pos, this);\n        return this;\n    }\n\n    getScaling(scale) {\n        Mat4Func.getScaling(scale, this);\n        return this;\n    }\n\n    getMaxScaleOnAxis() {\n        return Mat4Func.getMaxScaleOnAxis(this);\n    }\n\n    lookAt(eye, target, up) {\n        Mat4Func.targetTo(this, eye, target, up);\n        return this;\n    }\n\n    determinant() {\n        return Mat4Func.determinant(this);\n    }\n\n    fromArray(a, o = 0) {\n        this[0] = a[o];\n        this[1] = a[o + 1];\n        this[2] = a[o + 2];\n        this[3] = a[o + 3];\n        this[4] = a[o + 4];\n        this[5] = a[o + 5];\n        this[6] = a[o + 6];\n        this[7] = a[o + 7];\n        this[8] = a[o + 8];\n        this[9] = a[o + 9];\n        this[10] = a[o + 10];\n        this[11] = a[o + 11];\n        this[12] = a[o + 12];\n        this[13] = a[o + 13];\n        this[14] = a[o + 14];\n        this[15] = a[o + 15];\n        return this;\n    }\n\n    toArray(a = [], o = 0) {\n        a[o] = this[0];\n        a[o + 1] = this[1];\n        a[o + 2] = this[2];\n        a[o + 3] = this[3];\n        a[o + 4] = this[4];\n        a[o + 5] = this[5];\n        a[o + 6] = this[6];\n        a[o + 7] = this[7];\n        a[o + 8] = this[8];\n        a[o + 9] = this[9];\n        a[o + 10] = this[10];\n        a[o + 11] = this[11];\n        a[o + 12] = this[12];\n        a[o + 13] = this[13];\n        a[o + 14] = this[14];\n        a[o + 15] = this[15];\n        return a;\n    }\n}\n","import * as EulerFunc from './functions/EulerFunc.js';\nimport { Mat4 } from './Mat4.js';\n\nconst tmpMat4 = new Mat4();\n\nexport class Euler extends Array {\n    constructor(x = 0, y = x, z = x, order = 'YXZ') {\n        super(x, y, z);\n        this.order = order;\n        this.onChange = () => {};\n        return this;\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    get z() {\n        return this[2];\n    }\n\n    set x(v) {\n        this[0] = v;\n        this.onChange();\n    }\n\n    set y(v) {\n        this[1] = v;\n        this.onChange();\n    }\n\n    set z(v) {\n        this[2] = v;\n        this.onChange();\n    }\n\n    set(x, y = x, z = x) {\n        if (x.length) return this.copy(x);\n        this[0] = x;\n        this[1] = y;\n        this[2] = z;\n        this.onChange();\n        return this;\n    }\n\n    copy(v) {\n        this[0] = v[0];\n        this[1] = v[1];\n        this[2] = v[2];\n        this.onChange();\n        return this;\n    }\n\n    reorder(order) {\n        this.order = order;\n        this.onChange();\n        return this;\n    }\n\n    fromRotationMatrix(m, order = this.order) {\n        EulerFunc.fromRotationMatrix(this, m, order);\n        this.onChange();\n        return this;\n    }\n\n    fromQuaternion(q, order = this.order) {\n        tmpMat4.fromQuaternion(q);\n        return this.fromRotationMatrix(tmpMat4, order);\n    }\n\n    fromArray(a, o = 0) {\n        this[0] = a[o];\n        this[1] = a[o + 1];\n        this[2] = a[o + 2];\n        return this;\n    }\n\n    toArray(a = [], o = 0) {\n        a[o] = this[0];\n        a[o + 1] = this[1];\n        a[o + 2] = this[2];\n        return a;\n    }\n}\n","// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\nexport function fromRotationMatrix(out, m, order = 'YXZ') {\n    if (order === 'XYZ') {\n        out[1] = Math.asin(Math.min(Math.max(m[8], -1), 1));\n        if (Math.abs(m[8]) < 0.99999) {\n            out[0] = Math.atan2(-m[9], m[10]);\n            out[2] = Math.atan2(-m[4], m[0]);\n        } else {\n            out[0] = Math.atan2(m[6], m[5]);\n            out[2] = 0;\n        }\n    } else if (order === 'YXZ') {\n        out[0] = Math.asin(-Math.min(Math.max(m[9], -1), 1));\n        if (Math.abs(m[9]) < 0.99999) {\n            out[1] = Math.atan2(m[8], m[10]);\n            out[2] = Math.atan2(m[1], m[5]);\n        } else {\n            out[1] = Math.atan2(-m[2], m[0]);\n            out[2] = 0;\n        }\n    } else if (order === 'ZXY') {\n        out[0] = Math.asin(Math.min(Math.max(m[6], -1), 1));\n        if (Math.abs(m[6]) < 0.99999) {\n            out[1] = Math.atan2(-m[2], m[10]);\n            out[2] = Math.atan2(-m[4], m[5]);\n        } else {\n            out[1] = 0;\n            out[2] = Math.atan2(m[1], m[0]);\n        }\n    } else if (order === 'ZYX') {\n        out[1] = Math.asin(-Math.min(Math.max(m[2], -1), 1));\n        if (Math.abs(m[2]) < 0.99999) {\n            out[0] = Math.atan2(m[6], m[10]);\n            out[2] = Math.atan2(m[1], m[0]);\n        } else {\n            out[0] = 0;\n            out[2] = Math.atan2(-m[4], m[5]);\n        }\n    } else if (order === 'YZX') {\n        out[2] = Math.asin(Math.min(Math.max(m[1], -1), 1));\n        if (Math.abs(m[1]) < 0.99999) {\n            out[0] = Math.atan2(-m[9], m[5]);\n            out[1] = Math.atan2(-m[2], m[0]);\n        } else {\n            out[0] = 0;\n            out[1] = Math.atan2(m[8], m[10]);\n        }\n    } else if (order === 'XZY') {\n        out[2] = Math.asin(-Math.min(Math.max(m[4], -1), 1));\n        if (Math.abs(m[4]) < 0.99999) {\n            out[0] = Math.atan2(m[6], m[5]);\n            out[1] = Math.atan2(m[8], m[0]);\n        } else {\n            out[0] = Math.atan2(-m[9], m[10]);\n            out[1] = 0;\n        }\n    }\n\n    return out;\n}\n","import { Vec3 } from '../math/Vec3.js';\nimport { Quat } from '../math/Quat.js';\nimport { Mat4 } from '../math/Mat4.js';\nimport { Euler } from '../math/Euler.js';\n\nexport class Transform {\n    constructor() {\n        this.parent = null;\n        this.children = [];\n        this.visible = true;\n\n        this.matrix = new Mat4();\n        this.worldMatrix = new Mat4();\n        this.matrixAutoUpdate = true;\n        this.worldMatrixNeedsUpdate = false;\n\n        this.position = new Vec3();\n        this.quaternion = new Quat();\n        this.scale = new Vec3(1);\n        this.rotation = new Euler();\n        this.up = new Vec3(0, 1, 0);\n\n        this.rotation.onChange = () => this.quaternion.fromEuler(this.rotation);\n        this.quaternion.onChange = () => this.rotation.fromQuaternion(this.quaternion);\n    }\n\n    setParent(parent, notifyParent = true) {\n        if (this.parent && parent !== this.parent) this.parent.removeChild(this, false);\n        this.parent = parent;\n        if (notifyParent && parent) parent.addChild(this, false);\n    }\n\n    addChild(child, notifyChild = true) {\n        if (!~this.children.indexOf(child)) this.children.push(child);\n        if (notifyChild) child.setParent(this, false);\n    }\n\n    removeChild(child, notifyChild = true) {\n        if (!!~this.children.indexOf(child)) this.children.splice(this.children.indexOf(child), 1);\n        if (notifyChild) child.setParent(null, false);\n    }\n\n    updateMatrixWorld(force) {\n        if (this.matrixAutoUpdate) this.updateMatrix();\n        if (this.worldMatrixNeedsUpdate || force) {\n            if (this.parent === null) this.worldMatrix.copy(this.matrix);\n            else this.worldMatrix.multiply(this.parent.worldMatrix, this.matrix);\n            this.worldMatrixNeedsUpdate = false;\n            force = true;\n        }\n\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].updateMatrixWorld(force);\n        }\n    }\n\n    updateMatrix() {\n        this.matrix.compose(this.quaternion, this.position, this.scale);\n        this.worldMatrixNeedsUpdate = true;\n    }\n\n    traverse(callback) {\n        // Return true in callback to stop traversing children\n        if (callback(this)) return;\n        for (let i = 0, l = this.children.length; i < l; i++) {\n            this.children[i].traverse(callback);\n        }\n    }\n\n    decompose() {\n        this.matrix.getTranslation(this.position);\n        this.matrix.getRotation(this.quaternion);\n        this.matrix.getScaling(this.scale);\n        this.rotation.fromQuaternion(this.quaternion);\n    }\n\n    lookAt(target, invert = false) {\n        if (invert) this.matrix.lookAt(this.position, target, this.up);\n        else this.matrix.lookAt(target, this.position, this.up);\n        this.matrix.getRotation(this.quaternion);\n        this.rotation.fromQuaternion(this.quaternion);\n    }\n}\n","import { Transform } from './Transform.js';\nimport { Mat4 } from '../math/Mat4.js';\nimport { Vec3 } from '../math/Vec3.js';\n\nconst tempMat4 = new Mat4();\nconst tempVec3a = new Vec3();\nconst tempVec3b = new Vec3();\n\nexport class Camera extends Transform {\n    constructor(gl, { near = 0.1, far = 100, fov = 45, aspect = 1, left, right, bottom, top, zoom = 1 } = {}) {\n        super();\n\n        Object.assign(this, { near, far, fov, aspect, left, right, bottom, top, zoom });\n\n        this.projectionMatrix = new Mat4();\n        this.viewMatrix = new Mat4();\n        this.projectionViewMatrix = new Mat4();\n        this.worldPosition = new Vec3();\n\n        // Use orthographic if left/right set, else default to perspective camera\n        this.type = left || right ? 'orthographic' : 'perspective';\n\n        if (this.type === 'orthographic') this.orthographic();\n        else this.perspective();\n    }\n\n    perspective({ near = this.near, far = this.far, fov = this.fov, aspect = this.aspect } = {}) {\n        Object.assign(this, { near, far, fov, aspect });\n        this.projectionMatrix.fromPerspective({ fov: fov * (Math.PI / 180), aspect, near, far });\n        this.type = 'perspective';\n        return this;\n    }\n\n    orthographic({\n        near = this.near,\n        far = this.far,\n        left = this.left || -1,\n        right = this.right || 1,\n        bottom = this.bottom || -1,\n        top = this.top || 1,\n        zoom = this.zoom,\n    } = {}) {\n        Object.assign(this, { near, far, left, right, bottom, top, zoom });\n        left /= zoom;\n        right /= zoom;\n        bottom /= zoom;\n        top /= zoom;\n        this.projectionMatrix.fromOrthogonal({ left, right, bottom, top, near, far });\n        this.type = 'orthographic';\n        return this;\n    }\n\n    updateMatrixWorld() {\n        super.updateMatrixWorld();\n        this.viewMatrix.inverse(this.worldMatrix);\n        this.worldMatrix.getTranslation(this.worldPosition);\n\n        // used for sorting\n        this.projectionViewMatrix.multiply(this.projectionMatrix, this.viewMatrix);\n        return this;\n    }\n\n    lookAt(target) {\n        super.lookAt(target, true);\n        return this;\n    }\n\n    // Project 3D coordinate to 2D point\n    project(v) {\n        v.applyMatrix4(this.viewMatrix);\n        v.applyMatrix4(this.projectionMatrix);\n        return this;\n    }\n\n    // Unproject 2D point to 3D coordinate\n    unproject(v) {\n        v.applyMatrix4(tempMat4.inverse(this.projectionMatrix));\n        v.applyMatrix4(this.worldMatrix);\n        return this;\n    }\n\n    updateFrustum() {\n        if (!this.frustum) {\n            this.frustum = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];\n        }\n\n        const m = this.projectionViewMatrix;\n        this.frustum[0].set(m[3] - m[0], m[7] - m[4], m[11] - m[8]).constant = m[15] - m[12]; // -x\n        this.frustum[1].set(m[3] + m[0], m[7] + m[4], m[11] + m[8]).constant = m[15] + m[12]; // +x\n        this.frustum[2].set(m[3] + m[1], m[7] + m[5], m[11] + m[9]).constant = m[15] + m[13]; // +y\n        this.frustum[3].set(m[3] - m[1], m[7] - m[5], m[11] - m[9]).constant = m[15] - m[13]; // -y\n        this.frustum[4].set(m[3] - m[2], m[7] - m[6], m[11] - m[10]).constant = m[15] - m[14]; // +z (far)\n        this.frustum[5].set(m[3] + m[2], m[7] + m[6], m[11] + m[10]).constant = m[15] + m[14]; // -z (near)\n\n        for (let i = 0; i < 6; i++) {\n            const invLen = 1.0 / this.frustum[i].distance();\n            this.frustum[i].multiply(invLen);\n            this.frustum[i].constant *= invLen;\n        }\n    }\n\n    frustumIntersectsMesh(node, worldMatrix = node.worldMatrix) {\n        // If no position attribute, treat as frustumCulled false\n        if (!node.geometry.attributes.position) return true;\n\n        if (!node.geometry.bounds || node.geometry.bounds.radius === Infinity) node.geometry.computeBoundingSphere();\n\n        if (!node.geometry.bounds) return true;\n\n        const center = tempVec3a;\n        center.copy(node.geometry.bounds.center);\n        center.applyMatrix4(worldMatrix);\n\n        const radius = node.geometry.bounds.radius * worldMatrix.getMaxScaleOnAxis();\n\n        return this.frustumIntersectsSphere(center, radius);\n    }\n\n    frustumIntersectsSphere(center, radius) {\n        const normal = tempVec3b;\n\n        for (let i = 0; i < 6; i++) {\n            const plane = this.frustum[i];\n            const distance = normal.copy(plane).dot(center) + plane.constant;\n            if (distance < -radius) return false;\n        }\n        return true;\n    }\n}\n","const EPSILON = 0.000001;\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nexport function fromMat4(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[4];\n    out[4] = a[5];\n    out[5] = a[6];\n    out[6] = a[8];\n    out[7] = a[9];\n    out[8] = a[10];\n    return out;\n}\n\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {quat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\nexport function fromQuat(out, q) {\n    let x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3];\n    let x2 = x + x;\n    let y2 = y + y;\n    let z2 = z + z;\n\n    let xx = x * x2;\n    let yx = y * x2;\n    let yy = y * y2;\n    let zx = z * x2;\n    let zy = z * y2;\n    let zz = z * z2;\n    let wx = w * x2;\n    let wy = w * y2;\n    let wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[3] = yx - wz;\n    out[6] = zx + wy;\n\n    out[1] = yx + wz;\n    out[4] = 1 - xx - zz;\n    out[7] = zy - wx;\n\n    out[2] = zx - wy;\n    out[5] = zy + wx;\n    out[8] = 1 - xx - yy;\n\n    return out;\n}\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n}\n\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m10;\n    out[4] = m11;\n    out[5] = m12;\n    out[6] = m20;\n    out[7] = m21;\n    out[8] = m22;\n    return out;\n}\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n}\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        let a01 = a[1],\n            a02 = a[2],\n            a12 = a[5];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a01;\n        out[5] = a[7];\n        out[6] = a02;\n        out[7] = a12;\n    } else {\n        out[0] = a[0];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a[1];\n        out[4] = a[4];\n        out[5] = a[7];\n        out[6] = a[2];\n        out[7] = a[5];\n        out[8] = a[8];\n    }\n\n    return out;\n}\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nexport function invert(out, a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2];\n    let a10 = a[3],\n        a11 = a[4],\n        a12 = a[5];\n    let a20 = a[6],\n        a21 = a[7],\n        a22 = a[8];\n\n    let b01 = a22 * a11 - a12 * a21;\n    let b11 = -a22 * a10 + a12 * a20;\n    let b21 = a21 * a10 - a11 * a20;\n\n    // Calculate the determinant\n    let det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = b01 * det;\n    out[1] = (-a22 * a01 + a02 * a21) * det;\n    out[2] = (a12 * a01 - a02 * a11) * det;\n    out[3] = b11 * det;\n    out[4] = (a22 * a00 - a02 * a20) * det;\n    out[5] = (-a12 * a00 + a02 * a10) * det;\n    out[6] = b21 * det;\n    out[7] = (-a21 * a00 + a01 * a20) * det;\n    out[8] = (a11 * a00 - a01 * a10) * det;\n    return out;\n}\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {mat3} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2];\n    let a10 = a[3],\n        a11 = a[4],\n        a12 = a[5];\n    let a20 = a[6],\n        a21 = a[7],\n        a22 = a[8];\n\n    return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function multiply(out, a, b) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2];\n    let a10 = a[3],\n        a11 = a[4],\n        a12 = a[5];\n    let a20 = a[6],\n        a21 = a[7],\n        a22 = a[8];\n\n    let b00 = b[0],\n        b01 = b[1],\n        b02 = b[2];\n    let b10 = b[3],\n        b11 = b[4],\n        b12 = b[5];\n    let b20 = b[6],\n        b21 = b[7],\n        b22 = b[8];\n\n    out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n    out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n    out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return out;\n}\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to translate\n * @param {vec2} v vector to translate by\n * @returns {mat3} out\n */\nexport function translate(out, a, v) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8],\n        x = v[0],\n        y = v[1];\n\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n\n    out[3] = a10;\n    out[4] = a11;\n    out[5] = a12;\n\n    out[6] = x * a00 + y * a10 + a20;\n    out[7] = x * a01 + y * a11 + a21;\n    out[8] = x * a02 + y * a12 + a22;\n    return out;\n}\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function rotate(out, a, rad) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a10 = a[3],\n        a11 = a[4],\n        a12 = a[5],\n        a20 = a[6],\n        a21 = a[7],\n        a22 = a[8],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    out[0] = c * a00 + s * a10;\n    out[1] = c * a01 + s * a11;\n    out[2] = c * a02 + s * a12;\n\n    out[3] = c * a10 - s * a00;\n    out[4] = c * a11 - s * a01;\n    out[5] = c * a12 - s * a02;\n\n    out[6] = a20;\n    out[7] = a21;\n    out[8] = a22;\n    return out;\n}\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nexport function scale(out, a, v) {\n    let x = v[0],\n        y = v[1];\n\n    out[0] = x * a[0];\n    out[1] = x * a[1];\n    out[2] = x * a[2];\n\n    out[3] = y * a[3];\n    out[4] = y * a[4];\n    out[5] = y * a[5];\n\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n}\n\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {mat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\nexport function normalFromMat4(out, a) {\n    let a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    let a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n    let a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n    let a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15];\n\n    let b00 = a00 * a11 - a01 * a10;\n    let b01 = a00 * a12 - a02 * a10;\n    let b02 = a00 * a13 - a03 * a10;\n    let b03 = a01 * a12 - a02 * a11;\n    let b04 = a01 * a13 - a03 * a11;\n    let b05 = a02 * a13 - a03 * a12;\n    let b06 = a20 * a31 - a21 * a30;\n    let b07 = a20 * a32 - a22 * a30;\n    let b08 = a20 * a33 - a23 * a30;\n    let b09 = a21 * a32 - a22 * a31;\n    let b10 = a21 * a33 - a23 * a31;\n    let b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n    out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n    out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n    return out;\n}\n\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\nexport function projection(out, width, height) {\n    out[0] = 2 / width;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = -2 / height;\n    out[5] = 0;\n    out[6] = -1;\n    out[7] = 1;\n    out[8] = 1;\n    return out;\n}\n\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    out[4] = a[4] + b[4];\n    out[5] = a[5] + b[5];\n    out[6] = a[6] + b[6];\n    out[7] = a[7] + b[7];\n    out[8] = a[8] + b[8];\n    return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    out[4] = a[4] - b[4];\n    out[5] = a[5] - b[5];\n    out[6] = a[6] - b[6];\n    out[7] = a[7] - b[7];\n    out[8] = a[8] - b[8];\n    return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\nexport function multiplyScalar(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    out[4] = a[4] * b;\n    out[5] = a[5] * b;\n    out[6] = a[6] * b;\n    out[7] = a[7] * b;\n    out[8] = a[8] * b;\n    return out;\n}\n","import * as Mat3Func from './functions/Mat3Func.js';\n\nexport class Mat3 extends Array {\n    constructor(m00 = 1, m01 = 0, m02 = 0, m10 = 0, m11 = 1, m12 = 0, m20 = 0, m21 = 0, m22 = 1) {\n        super(m00, m01, m02, m10, m11, m12, m20, m21, m22);\n        return this;\n    }\n\n    set(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n        if (m00.length) return this.copy(m00);\n        Mat3Func.set(this, m00, m01, m02, m10, m11, m12, m20, m21, m22);\n        return this;\n    }\n\n    translate(v, m = this) {\n        Mat3Func.translate(this, m, v);\n        return this;\n    }\n\n    rotate(v, m = this) {\n        Mat3Func.rotate(this, m, v);\n        return this;\n    }\n\n    scale(v, m = this) {\n        Mat3Func.scale(this, m, v);\n        return this;\n    }\n\n    multiply(ma, mb) {\n        if (mb) {\n            Mat3Func.multiply(this, ma, mb);\n        } else {\n            Mat3Func.multiply(this, this, ma);\n        }\n        return this;\n    }\n\n    identity() {\n        Mat3Func.identity(this);\n        return this;\n    }\n\n    copy(m) {\n        Mat3Func.copy(this, m);\n        return this;\n    }\n\n    fromMatrix4(m) {\n        Mat3Func.fromMat4(this, m);\n        return this;\n    }\n\n    fromQuaternion(q) {\n        Mat3Func.fromQuat(this, q);\n        return this;\n    }\n\n    fromBasis(vec3a, vec3b, vec3c) {\n        this.set(vec3a[0], vec3a[1], vec3a[2], vec3b[0], vec3b[1], vec3b[2], vec3c[0], vec3c[1], vec3c[2]);\n        return this;\n    }\n\n    inverse(m = this) {\n        Mat3Func.invert(this, m);\n        return this;\n    }\n\n    getNormalMatrix(m) {\n        Mat3Func.normalFromMat4(this, m);\n        return this;\n    }\n}\n","import { Transform } from './Transform.js';\nimport { Mat3 } from '../math/Mat3.js';\nimport { Mat4 } from '../math/Mat4.js';\n\nlet ID = 0;\n\nexport class Mesh extends Transform {\n    constructor(gl, { geometry, program, mode = gl.TRIANGLES, frustumCulled = true, renderOrder = 0 } = {}) {\n        super();\n        if (!gl.canvas) console.error('gl not passed as first argument to Mesh');\n        this.gl = gl;\n        this.id = ID++;\n        this.geometry = geometry;\n        this.program = program;\n        this.mode = mode;\n\n        // Used to skip frustum culling\n        this.frustumCulled = frustumCulled;\n\n        // Override sorting to force an order\n        this.renderOrder = renderOrder;\n        this.modelViewMatrix = new Mat4();\n        this.normalMatrix = new Mat3();\n        this.beforeRenderCallbacks = [];\n        this.afterRenderCallbacks = [];\n    }\n\n    onBeforeRender(f) {\n        this.beforeRenderCallbacks.push(f);\n        return this;\n    }\n\n    onAfterRender(f) {\n        this.afterRenderCallbacks.push(f);\n        return this;\n    }\n\n    draw({ camera } = {}) {\n        if (camera) {\n            // Add empty matrix uniforms to program if unset\n            if (!this.program.uniforms.modelMatrix) {\n                Object.assign(this.program.uniforms, {\n                    modelMatrix: { value: null },\n                    viewMatrix: { value: null },\n                    modelViewMatrix: { value: null },\n                    normalMatrix: { value: null },\n                    projectionMatrix: { value: null },\n                    cameraPosition: { value: null },\n                });\n            }\n\n            // Set the matrix uniforms\n            this.program.uniforms.projectionMatrix.value = camera.projectionMatrix;\n            this.program.uniforms.cameraPosition.value = camera.worldPosition;\n            this.program.uniforms.viewMatrix.value = camera.viewMatrix;\n            this.modelViewMatrix.multiply(camera.viewMatrix, this.worldMatrix);\n            this.normalMatrix.getNormalMatrix(this.modelViewMatrix);\n            this.program.uniforms.modelMatrix.value = this.worldMatrix;\n            this.program.uniforms.modelViewMatrix.value = this.modelViewMatrix;\n            this.program.uniforms.normalMatrix.value = this.normalMatrix;\n        }\n        this.beforeRenderCallbacks.forEach((f) => f && f({ mesh: this, camera }));\n\n        // determine if faces need to be flipped - when mesh scaled negatively\n        let flipFaces = this.program.cullFace && this.worldMatrix.determinant() < 0;\n        this.program.use({ flipFaces });\n        this.geometry.draw({ mode: this.mode, program: this.program });\n        this.afterRenderCallbacks.forEach((f) => f && f({ mesh: this, camera }));\n    }\n}\n","// TODO: delete texture\n// TODO: use texSubImage2D for updates (video or when loaded)\n// TODO: need? encoding = linearEncoding\n// TODO: support non-compressed mipmaps uploads\n\nconst emptyPixel = new Uint8Array(4);\n\nfunction isPowerOf2(value) {\n    return (value & (value - 1)) === 0;\n}\n\nlet ID = 1;\n\nexport class Texture {\n    constructor(\n        gl,\n        {\n            image,\n            target = gl.TEXTURE_2D,\n            type = gl.UNSIGNED_BYTE,\n            format = gl.RGBA,\n            internalFormat = format,\n            wrapS = gl.CLAMP_TO_EDGE,\n            wrapT = gl.CLAMP_TO_EDGE,\n            generateMipmaps = true,\n            minFilter = generateMipmaps ? gl.NEAREST_MIPMAP_LINEAR : gl.LINEAR,\n            magFilter = gl.LINEAR,\n            premultiplyAlpha = false,\n            unpackAlignment = 4,\n            flipY = target == gl.TEXTURE_2D ? true : false,\n            anisotropy = 0,\n            level = 0,\n            width, // used for RenderTargets or Data Textures\n            height = width,\n        } = {}\n    ) {\n        this.gl = gl;\n        this.id = ID++;\n\n        this.image = image;\n        this.target = target;\n        this.type = type;\n        this.format = format;\n        this.internalFormat = internalFormat;\n        this.minFilter = minFilter;\n        this.magFilter = magFilter;\n        this.wrapS = wrapS;\n        this.wrapT = wrapT;\n        this.generateMipmaps = generateMipmaps;\n        this.premultiplyAlpha = premultiplyAlpha;\n        this.unpackAlignment = unpackAlignment;\n        this.flipY = flipY;\n        this.anisotropy = Math.min(anisotropy, this.gl.renderer.parameters.maxAnisotropy);\n        this.level = level;\n        this.width = width;\n        this.height = height;\n        this.texture = this.gl.createTexture();\n\n        this.store = {\n            image: null,\n        };\n\n        // Alias for state store to avoid redundant calls for global state\n        this.glState = this.gl.renderer.state;\n\n        // State store to avoid redundant calls for per-texture state\n        this.state = {};\n        this.state.minFilter = this.gl.NEAREST_MIPMAP_LINEAR;\n        this.state.magFilter = this.gl.LINEAR;\n        this.state.wrapS = this.gl.REPEAT;\n        this.state.wrapT = this.gl.REPEAT;\n        this.state.anisotropy = 0;\n    }\n\n    bind() {\n        // Already bound to active texture unit\n        if (this.glState.textureUnits[this.glState.activeTextureUnit] === this.id) return;\n        this.gl.bindTexture(this.target, this.texture);\n        this.glState.textureUnits[this.glState.activeTextureUnit] = this.id;\n    }\n\n    update(textureUnit = 0) {\n        const needsUpdate = !(this.image === this.store.image && !this.needsUpdate);\n\n        // Make sure that texture is bound to its texture unit\n        if (needsUpdate || this.glState.textureUnits[textureUnit] !== this.id) {\n            // set active texture unit to perform texture functions\n            this.gl.renderer.activeTexture(textureUnit);\n            this.bind();\n        }\n\n        if (!needsUpdate) return;\n        this.needsUpdate = false;\n\n        if (this.flipY !== this.glState.flipY) {\n            this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, this.flipY);\n            this.glState.flipY = this.flipY;\n        }\n\n        if (this.premultiplyAlpha !== this.glState.premultiplyAlpha) {\n            this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);\n            this.glState.premultiplyAlpha = this.premultiplyAlpha;\n        }\n\n        if (this.unpackAlignment !== this.glState.unpackAlignment) {\n            this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, this.unpackAlignment);\n            this.glState.unpackAlignment = this.unpackAlignment;\n        }\n\n        if (this.minFilter !== this.state.minFilter) {\n            this.gl.texParameteri(this.target, this.gl.TEXTURE_MIN_FILTER, this.minFilter);\n            this.state.minFilter = this.minFilter;\n        }\n\n        if (this.magFilter !== this.state.magFilter) {\n            this.gl.texParameteri(this.target, this.gl.TEXTURE_MAG_FILTER, this.magFilter);\n            this.state.magFilter = this.magFilter;\n        }\n\n        if (this.wrapS !== this.state.wrapS) {\n            this.gl.texParameteri(this.target, this.gl.TEXTURE_WRAP_S, this.wrapS);\n            this.state.wrapS = this.wrapS;\n        }\n\n        if (this.wrapT !== this.state.wrapT) {\n            this.gl.texParameteri(this.target, this.gl.TEXTURE_WRAP_T, this.wrapT);\n            this.state.wrapT = this.wrapT;\n        }\n\n        if (this.anisotropy && this.anisotropy !== this.state.anisotropy) {\n            this.gl.texParameterf(\n                this.target,\n                this.gl.renderer.getExtension('EXT_texture_filter_anisotropic').TEXTURE_MAX_ANISOTROPY_EXT,\n                this.anisotropy\n            );\n            this.state.anisotropy = this.anisotropy;\n        }\n\n        if (this.image) {\n            if (this.image.width) {\n                this.width = this.image.width;\n                this.height = this.image.height;\n            }\n\n            if (this.target === this.gl.TEXTURE_CUBE_MAP) {\n                // For cube maps\n                for (let i = 0; i < 6; i++) {\n                    this.gl.texImage2D(\n                        this.gl.TEXTURE_CUBE_MAP_POSITIVE_X + i,\n                        this.level,\n                        this.internalFormat,\n                        this.format,\n                        this.type,\n                        this.image[i]\n                    );\n                }\n            } else if (ArrayBuffer.isView(this.image)) {\n                // Data texture\n                this.gl.texImage2D(this.target, this.level, this.internalFormat, this.width, this.height, 0, this.format, this.type, this.image);\n            } else if (this.image.isCompressedTexture) {\n                // Compressed texture\n                for (let level = 0; level < this.image.length; level++) {\n                    this.gl.compressedTexImage2D(\n                        this.target,\n                        level,\n                        this.internalFormat,\n                        this.image[level].width,\n                        this.image[level].height,\n                        0,\n                        this.image[level].data\n                    );\n                }\n            } else {\n                // Regular texture\n                this.gl.texImage2D(this.target, this.level, this.internalFormat, this.format, this.type, this.image);\n            }\n\n            if (this.generateMipmaps) {\n                // For WebGL1, if not a power of 2, turn off mips, set wrapping to clamp to edge and minFilter to linear\n                if (!this.gl.renderer.isWebgl2 && (!isPowerOf2(this.image.width) || !isPowerOf2(this.image.height))) {\n                    this.generateMipmaps = false;\n                    this.wrapS = this.wrapT = this.gl.CLAMP_TO_EDGE;\n                    this.minFilter = this.gl.LINEAR;\n                } else {\n                    this.gl.generateMipmap(this.target);\n                }\n            }\n\n            // Callback for when data is pushed to GPU\n            this.onUpdate && this.onUpdate();\n        } else {\n            if (this.target === this.gl.TEXTURE_CUBE_MAP) {\n                // Upload empty pixel for each side while no image to avoid errors while image or video loading\n                for (let i = 0; i < 6; i++) {\n                    this.gl.texImage2D(\n                        this.gl.TEXTURE_CUBE_MAP_POSITIVE_X + i,\n                        0,\n                        this.gl.RGBA,\n                        1,\n                        1,\n                        0,\n                        this.gl.RGBA,\n                        this.gl.UNSIGNED_BYTE,\n                        emptyPixel\n                    );\n                }\n            } else if (this.width) {\n                // image intentionally left null for RenderTarget\n                this.gl.texImage2D(this.target, this.level, this.internalFormat, this.width, this.height, 0, this.format, this.type, null);\n            } else {\n                // Upload empty pixel if no image to avoid errors while image or video loading\n                this.gl.texImage2D(this.target, 0, this.gl.RGBA, 1, 1, 0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, emptyPixel);\n            }\n        }\n        this.store.image = this.image;\n    }\n}\n","const EPSILON = 0.000001;\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the source vector\n * @returns {vec2} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n}\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nexport function set(out, x, y) {\n    out[0] = x;\n    out[1] = y;\n    return out;\n}\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    return out;\n}\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    return out;\n}\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    return out;\n}\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return Math.sqrt(x * x + y * y);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return x * x + y * y;\n}\n\n/**\n * Calculates the length of a vec2\n *\n * @param {vec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    var x = a[0],\n        y = a[1];\n    return Math.sqrt(x * x + y * y);\n}\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {vec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    var x = a[0],\n        y = a[1];\n    return x * x + y * y;\n}\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to negate\n * @returns {vec2} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    return out;\n}\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to invert\n * @returns {vec2} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    return out;\n}\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to normalize\n * @returns {vec2} out\n */\nexport function normalize(out, a) {\n    var x = a[0],\n        y = a[1];\n    var len = x * x + y * y;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    return out;\n}\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n}\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product returns a scalar\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} cross product of a and b\n */\nexport function cross(a, b) {\n    return a[0] * b[1] - a[1] * b[0];\n}\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec2} out\n */\nexport function lerp(out, a, b, t) {\n    var ax = a[0],\n        ay = a[1];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    return out;\n}\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    return out;\n}\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2d} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2d(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat3} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat3(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n}\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat4(out, a, m) {\n    let x = a[0];\n    let y = a[1];\n    out[0] = m[0] * x + m[4] * y + m[12];\n    out[1] = m[1] * x + m[5] * y + m[13];\n    return out;\n}\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1];\n}\n","import * as Vec2Func from './functions/Vec2Func.js';\n\nexport class Vec2 extends Array {\n    constructor(x = 0, y = x) {\n        super(x, y);\n        return this;\n    }\n\n    get x() {\n        return this[0];\n    }\n\n    get y() {\n        return this[1];\n    }\n\n    set x(v) {\n        this[0] = v;\n    }\n\n    set y(v) {\n        this[1] = v;\n    }\n\n    set(x, y = x) {\n        if (x.length) return this.copy(x);\n        Vec2Func.set(this, x, y);\n        return this;\n    }\n\n    copy(v) {\n        Vec2Func.copy(this, v);\n        return this;\n    }\n\n    add(va, vb) {\n        if (vb) Vec2Func.add(this, va, vb);\n        else Vec2Func.add(this, this, va);\n        return this;\n    }\n\n    sub(va, vb) {\n        if (vb) Vec2Func.subtract(this, va, vb);\n        else Vec2Func.subtract(this, this, va);\n        return this;\n    }\n\n    multiply(v) {\n        if (v.length) Vec2Func.multiply(this, this, v);\n        else Vec2Func.scale(this, this, v);\n        return this;\n    }\n\n    divide(v) {\n        if (v.length) Vec2Func.divide(this, this, v);\n        else Vec2Func.scale(this, this, 1 / v);\n        return this;\n    }\n\n    inverse(v = this) {\n        Vec2Func.inverse(this, v);\n        return this;\n    }\n\n    // Can't use 'length' as Array.prototype uses it\n    len() {\n        return Vec2Func.length(this);\n    }\n\n    distance(v) {\n        if (v) return Vec2Func.distance(this, v);\n        else return Vec2Func.length(this);\n    }\n\n    squaredLen() {\n        return this.squaredDistance();\n    }\n\n    squaredDistance(v) {\n        if (v) return Vec2Func.squaredDistance(this, v);\n        else return Vec2Func.squaredLength(this);\n    }\n\n    negate(v = this) {\n        Vec2Func.negate(this, v);\n        return this;\n    }\n\n    cross(va, vb) {\n        if (vb) return Vec2Func.cross(va, vb);\n        return Vec2Func.cross(this, va);\n    }\n\n    scale(v) {\n        Vec2Func.scale(this, this, v);\n        return this;\n    }\n\n    normalize() {\n        Vec2Func.normalize(this, this);\n        return this;\n    }\n\n    dot(v) {\n        return Vec2Func.dot(this, v);\n    }\n\n    equals(v) {\n        return Vec2Func.exactEquals(this, v);\n    }\n\n    applyMatrix3(mat3) {\n        Vec2Func.transformMat3(this, this, mat3);\n        return this;\n    }\n\n    applyMatrix4(mat4) {\n        Vec2Func.transformMat4(this, this, mat4);\n        return this;\n    }\n\n    lerp(v, a) {\n        Vec2Func.lerp(this, this, v, a);\n        return this;\n    }\n\n    clone() {\n        return new Vec2(this[0], this[1]);\n    }\n\n    fromArray(a, o = 0) {\n        this[0] = a[o];\n        this[1] = a[o + 1];\n        return this;\n    }\n\n    toArray(a = [], o = 0) {\n        a[o] = this[0];\n        a[o + 1] = this[1];\n        return a;\n    }\n}\n","import { Geometry } from '../core/Geometry.js';\nimport { Vec3 } from '../math/Vec3.js';\n\nexport class Sphere extends Geometry {\n    constructor(\n        gl,\n        {\n            radius = 0.5,\n            widthSegments = 16,\n            heightSegments = Math.ceil(widthSegments * 0.5),\n            phiStart = 0,\n            phiLength = Math.PI * 2,\n            thetaStart = 0,\n            thetaLength = Math.PI,\n            attributes = {},\n        } = {}\n    ) {\n        const wSegs = widthSegments;\n        const hSegs = heightSegments;\n        const pStart = phiStart;\n        const pLength = phiLength;\n        const tStart = thetaStart;\n        const tLength = thetaLength;\n\n        const num = (wSegs + 1) * (hSegs + 1);\n        const numIndices = wSegs * hSegs * 6;\n\n        const position = new Float32Array(num * 3);\n        const normal = new Float32Array(num * 3);\n        const uv = new Float32Array(num * 2);\n        const index = num > 65536 ? new Uint32Array(numIndices) : new Uint16Array(numIndices);\n\n        let i = 0;\n        let iv = 0;\n        let ii = 0;\n        let te = tStart + tLength;\n        const grid = [];\n\n        let n = new Vec3();\n\n        for (let iy = 0; iy <= hSegs; iy++) {\n            let vRow = [];\n            let v = iy / hSegs;\n            for (let ix = 0; ix <= wSegs; ix++, i++) {\n                let u = ix / wSegs;\n                let x = -radius * Math.cos(pStart + u * pLength) * Math.sin(tStart + v * tLength);\n                let y = radius * Math.cos(tStart + v * tLength);\n                let z = radius * Math.sin(pStart + u * pLength) * Math.sin(tStart + v * tLength);\n\n                position[i * 3] = x;\n                position[i * 3 + 1] = y;\n                position[i * 3 + 2] = z;\n\n                n.set(x, y, z).normalize();\n                normal[i * 3] = n.x;\n                normal[i * 3 + 1] = n.y;\n                normal[i * 3 + 2] = n.z;\n\n                uv[i * 2] = u;\n                uv[i * 2 + 1] = 1 - v;\n\n                vRow.push(iv++);\n            }\n\n            grid.push(vRow);\n        }\n\n        for (let iy = 0; iy < hSegs; iy++) {\n            for (let ix = 0; ix < wSegs; ix++) {\n                let a = grid[iy][ix + 1];\n                let b = grid[iy][ix];\n                let c = grid[iy + 1][ix];\n                let d = grid[iy + 1][ix + 1];\n\n                if (iy !== 0 || tStart > 0) {\n                    index[ii * 3] = a;\n                    index[ii * 3 + 1] = b;\n                    index[ii * 3 + 2] = d;\n                    ii++;\n                }\n                if (iy !== hSegs - 1 || te < Math.PI) {\n                    index[ii * 3] = b;\n                    index[ii * 3 + 1] = c;\n                    index[ii * 3 + 2] = d;\n                    ii++;\n                }\n            }\n        }\n\n        Object.assign(attributes, {\n            position: { size: 3, data: position },\n            normal: { size: 3, data: normal },\n            uv: { size: 2, data: uv },\n            index: { data: index },\n        });\n\n        super(gl, attributes);\n    }\n}\n","// Based from ThreeJS' OrbitControls class, rewritten using es6 with some additions and subtractions.\n// TODO: abstract event handlers so can be fed from other sources\n// TODO: make scroll zoom more accurate than just >/< zero\n// TODO: be able to pass in new camera position\n\nimport { Vec3 } from '../math/Vec3.js';\nimport { Vec2 } from '../math/Vec2.js';\n\nconst STATE = { NONE: -1, ROTATE: 0, DOLLY: 1, PAN: 2, DOLLY_PAN: 3 };\nconst tempVec3 = new Vec3();\nconst tempVec2a = new Vec2();\nconst tempVec2b = new Vec2();\n\nexport function Orbit(\n    object,\n    {\n        element = document,\n        enabled = true,\n        target = new Vec3(),\n        ease = 0.25,\n        inertia = 0.85,\n        enableRotate = true,\n        rotateSpeed = 0.1,\n        autoRotate = false,\n        autoRotateSpeed = 1.0,\n        enableZoom = true,\n        zoomSpeed = 1,\n        zoomStyle = 'dolly',\n        enablePan = true,\n        panSpeed = 0.1,\n        minPolarAngle = 0,\n        maxPolarAngle = Math.PI,\n        minAzimuthAngle = -Infinity,\n        maxAzimuthAngle = Infinity,\n        minDistance = 0,\n        maxDistance = Infinity,\n    } = {}\n) {\n    this.enabled = enabled;\n    this.target = target;\n    this.zoomStyle = zoomStyle;\n\n    // Catch attempts to disable - set to 1 so has no effect\n    ease = ease || 1;\n    inertia = inertia || 0;\n\n    this.minDistance = minDistance;\n    this.maxDistance = maxDistance;\n\n    // current position in sphericalTarget coordinates\n    const sphericalDelta = { radius: 1, phi: 0, theta: 0 };\n    const sphericalTarget = { radius: 1, phi: 0, theta: 0 };\n    const spherical = { radius: 1, phi: 0, theta: 0 };\n    const panDelta = new Vec3();\n\n    // Grab initial position values\n    const offset = new Vec3();\n    offset.copy(object.position).sub(this.target);\n    spherical.radius = sphericalTarget.radius = offset.distance();\n    spherical.theta = sphericalTarget.theta = Math.atan2(offset.x, offset.z);\n    spherical.phi = sphericalTarget.phi = Math.acos(Math.min(Math.max(offset.y / sphericalTarget.radius, -1), 1));\n\n    this.offset = offset;\n\n    this.update = () => {\n        if (autoRotate) {\n            handleAutoRotate();\n        }\n\n        // apply delta\n        sphericalTarget.radius *= sphericalDelta.radius;\n        sphericalTarget.theta += sphericalDelta.theta;\n        sphericalTarget.phi += sphericalDelta.phi;\n\n        // apply boundaries\n        sphericalTarget.theta = Math.max(minAzimuthAngle, Math.min(maxAzimuthAngle, sphericalTarget.theta));\n        sphericalTarget.phi = Math.max(minPolarAngle, Math.min(maxPolarAngle, sphericalTarget.phi));\n        sphericalTarget.radius = Math.max(this.minDistance, Math.min(this.maxDistance, sphericalTarget.radius));\n\n        // ease values\n        spherical.phi += (sphericalTarget.phi - spherical.phi) * ease;\n        spherical.theta += (sphericalTarget.theta - spherical.theta) * ease;\n        spherical.radius += (sphericalTarget.radius - spherical.radius) * ease;\n\n        // apply pan to target. As offset is relative to target, it also shifts\n        this.target.add(panDelta);\n\n        // apply rotation to offset\n        let sinPhiRadius = spherical.radius * Math.sin(Math.max(0.000001, spherical.phi));\n        offset.x = sinPhiRadius * Math.sin(spherical.theta);\n        offset.y = spherical.radius * Math.cos(spherical.phi);\n        offset.z = sinPhiRadius * Math.cos(spherical.theta);\n\n        // Apply updated values to object\n        object.position.copy(this.target).add(offset);\n        object.lookAt(this.target);\n\n        // Apply inertia to values\n        sphericalDelta.theta *= inertia;\n        sphericalDelta.phi *= inertia;\n        panDelta.multiply(inertia);\n\n        // Reset scale every frame to avoid applying scale multiple times\n        sphericalDelta.radius = 1;\n    };\n\n    // Updates internals with new position\n    this.forcePosition = () => {\n        offset.copy(object.position).sub(this.target);\n        spherical.radius = sphericalTarget.radius = offset.distance();\n        spherical.theta = sphericalTarget.theta = Math.atan2(offset.x, offset.z);\n        spherical.phi = sphericalTarget.phi = Math.acos(Math.min(Math.max(offset.y / sphericalTarget.radius, -1), 1));\n        object.lookAt(this.target);\n    };\n\n    // Everything below here just updates panDelta and sphericalDelta\n    // Using those two objects' values, the orbit is calculated\n\n    const rotateStart = new Vec2();\n    const panStart = new Vec2();\n    const dollyStart = new Vec2();\n\n    let state = STATE.NONE;\n    this.mouseButtons = { ORBIT: 0, ZOOM: 1, PAN: 2 };\n\n    function getZoomScale() {\n        return Math.pow(0.95, zoomSpeed);\n    }\n\n    function panLeft(distance, m) {\n        tempVec3.set(m[0], m[1], m[2]);\n        tempVec3.multiply(-distance);\n        panDelta.add(tempVec3);\n    }\n\n    function panUp(distance, m) {\n        tempVec3.set(m[4], m[5], m[6]);\n        tempVec3.multiply(distance);\n        panDelta.add(tempVec3);\n    }\n\n    const pan = (deltaX, deltaY) => {\n        let el = element === document ? document.body : element;\n        tempVec3.copy(object.position).sub(this.target);\n        let targetDistance = tempVec3.distance();\n        targetDistance *= Math.tan((((object.fov || 45) / 2) * Math.PI) / 180.0);\n        panLeft((2 * deltaX * targetDistance) / el.clientHeight, object.matrix);\n        panUp((2 * deltaY * targetDistance) / el.clientHeight, object.matrix);\n    };\n\n    const dolly = (dollyScale) => {\n        if (this.zoomStyle === 'dolly') sphericalDelta.radius /= dollyScale;\n        else {\n            object.fov /= dollyScale;\n            if (object.type === 'orthographic') object.orthographic();\n            else object.perspective();\n        }\n    };\n\n    function handleAutoRotate() {\n        const angle = ((2 * Math.PI) / 60 / 60) * autoRotateSpeed;\n        sphericalDelta.theta -= angle;\n    }\n\n    function handleMoveRotate(x, y) {\n        tempVec2a.set(x, y);\n        tempVec2b.sub(tempVec2a, rotateStart).multiply(rotateSpeed);\n        let el = element === document ? document.body : element;\n        sphericalDelta.theta -= (2 * Math.PI * tempVec2b.x) / el.clientHeight;\n        sphericalDelta.phi -= (2 * Math.PI * tempVec2b.y) / el.clientHeight;\n        rotateStart.copy(tempVec2a);\n    }\n\n    function handleMouseMoveDolly(e) {\n        tempVec2a.set(e.clientX, e.clientY);\n        tempVec2b.sub(tempVec2a, dollyStart);\n        if (tempVec2b.y > 0) {\n            dolly(getZoomScale());\n        } else if (tempVec2b.y < 0) {\n            dolly(1 / getZoomScale());\n        }\n        dollyStart.copy(tempVec2a);\n    }\n\n    function handleMovePan(x, y) {\n        tempVec2a.set(x, y);\n        tempVec2b.sub(tempVec2a, panStart).multiply(panSpeed);\n        pan(tempVec2b.x, tempVec2b.y);\n        panStart.copy(tempVec2a);\n    }\n\n    function handleTouchStartDollyPan(e) {\n        if (enableZoom) {\n            let dx = e.touches[0].pageX - e.touches[1].pageX;\n            let dy = e.touches[0].pageY - e.touches[1].pageY;\n            let distance = Math.sqrt(dx * dx + dy * dy);\n            dollyStart.set(0, distance);\n        }\n\n        if (enablePan) {\n            let x = 0.5 * (e.touches[0].pageX + e.touches[1].pageX);\n            let y = 0.5 * (e.touches[0].pageY + e.touches[1].pageY);\n            panStart.set(x, y);\n        }\n    }\n\n    function handleTouchMoveDollyPan(e) {\n        if (enableZoom) {\n            let dx = e.touches[0].pageX - e.touches[1].pageX;\n            let dy = e.touches[0].pageY - e.touches[1].pageY;\n            let distance = Math.sqrt(dx * dx + dy * dy);\n            tempVec2a.set(0, distance);\n            tempVec2b.set(0, Math.pow(tempVec2a.y / dollyStart.y, zoomSpeed));\n            dolly(tempVec2b.y);\n            dollyStart.copy(tempVec2a);\n        }\n\n        if (enablePan) {\n            let x = 0.5 * (e.touches[0].pageX + e.touches[1].pageX);\n            let y = 0.5 * (e.touches[0].pageY + e.touches[1].pageY);\n            handleMovePan(x, y);\n        }\n    }\n\n    const onMouseDown = (e) => {\n        if (!this.enabled) return;\n\n        switch (e.button) {\n            case this.mouseButtons.ORBIT:\n                if (enableRotate === false) return;\n                rotateStart.set(e.clientX, e.clientY);\n                state = STATE.ROTATE;\n                break;\n            case this.mouseButtons.ZOOM:\n                if (enableZoom === false) return;\n                dollyStart.set(e.clientX, e.clientY);\n                state = STATE.DOLLY;\n                break;\n            case this.mouseButtons.PAN:\n                if (enablePan === false) return;\n                panStart.set(e.clientX, e.clientY);\n                state = STATE.PAN;\n                break;\n        }\n\n        if (state !== STATE.NONE) {\n            window.addEventListener('mousemove', onMouseMove, false);\n            window.addEventListener('mouseup', onMouseUp, false);\n        }\n    };\n\n    const onMouseMove = (e) => {\n        if (!this.enabled) return;\n\n        switch (state) {\n            case STATE.ROTATE:\n                if (enableRotate === false) return;\n                handleMoveRotate(e.clientX, e.clientY);\n                break;\n            case STATE.DOLLY:\n                if (enableZoom === false) return;\n                handleMouseMoveDolly(e);\n                break;\n            case STATE.PAN:\n                if (enablePan === false) return;\n                handleMovePan(e.clientX, e.clientY);\n                break;\n        }\n    };\n\n    const onMouseUp = () => {\n        window.removeEventListener('mousemove', onMouseMove, false);\n        window.removeEventListener('mouseup', onMouseUp, false);\n        state = STATE.NONE;\n    };\n\n    const onMouseWheel = (e) => {\n        if (!this.enabled || !enableZoom || (state !== STATE.NONE && state !== STATE.ROTATE)) return;\n        e.stopPropagation();\n        e.preventDefault();\n\n        if (e.deltaY < 0) {\n            dolly(1 / getZoomScale());\n        } else if (e.deltaY > 0) {\n            dolly(getZoomScale());\n        }\n    };\n\n    const onTouchStart = (e) => {\n        if (!this.enabled) return;\n        e.preventDefault();\n\n        switch (e.touches.length) {\n            case 1:\n                if (enableRotate === false) return;\n                rotateStart.set(e.touches[0].pageX, e.touches[0].pageY);\n                state = STATE.ROTATE;\n                break;\n            case 2:\n                if (enableZoom === false && enablePan === false) return;\n                handleTouchStartDollyPan(e);\n                state = STATE.DOLLY_PAN;\n                break;\n            default:\n                state = STATE.NONE;\n        }\n    };\n\n    const onTouchMove = (e) => {\n        if (!this.enabled) return;\n        e.preventDefault();\n        e.stopPropagation();\n\n        switch (e.touches.length) {\n            case 1:\n                if (enableRotate === false) return;\n                handleMoveRotate(e.touches[0].pageX, e.touches[0].pageY);\n                break;\n            case 2:\n                if (enableZoom === false && enablePan === false) return;\n                handleTouchMoveDollyPan(e);\n                break;\n            default:\n                state = STATE.NONE;\n        }\n    };\n\n    const onTouchEnd = () => {\n        if (!this.enabled) return;\n        state = STATE.NONE;\n    };\n\n    const onContextMenu = (e) => {\n        if (!this.enabled) return;\n        e.preventDefault();\n    };\n\n    function addHandlers() {\n        element.addEventListener('contextmenu', onContextMenu, false);\n        element.addEventListener('mousedown', onMouseDown, false);\n        element.addEventListener('wheel', onMouseWheel, { passive: false });\n        element.addEventListener('touchstart', onTouchStart, { passive: false });\n        element.addEventListener('touchend', onTouchEnd, false);\n        element.addEventListener('touchmove', onTouchMove, { passive: false });\n    }\n\n    this.remove = function () {\n        element.removeEventListener('contextmenu', onContextMenu);\n        element.removeEventListener('mousedown', onMouseDown);\n        element.removeEventListener('wheel', onMouseWheel);\n        element.removeEventListener('touchstart', onTouchStart);\n        element.removeEventListener('touchend', onTouchEnd);\n        element.removeEventListener('touchmove', onTouchMove);\n        window.removeEventListener('mousemove', onMouseMove);\n        window.removeEventListener('mouseup', onMouseUp);\n    };\n\n    addHandlers();\n}\n","import { Texture } from 'ogl';\r\n\r\n// not sure why this doesn't work locally\r\n/**\r\n * async loads image \r\n * @param src {string}\r\n * @returns {Promise<HTMLImageElement>}\r\n */\r\nasync function getImage(src) {\r\n    const response = await fetch(src, { mode: 'cors' });\r\n    const blob = await response.blob();\r\n\r\n    if (!!createImageBitmap) {\r\n        return await createImageBitmap(blob, { imageOrientation: 'flipY', premultiplyAlpha: 'none' });\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const urlLoader = (!!URL ? URL : webkitURL);\r\n        const objectUrl = urlLoader.createObjectURL(blob);\r\n        const img = new Image();\r\n        img.onload = () => {\r\n            resolve(img);\r\n            urlLoader.revokeObjectURL(objectUrl);\r\n        }\r\n        img.onerror = reject;\r\n        img.src = objectUrl;\r\n    });\r\n}\r\n\r\nfunction powerOfTwo(value) {\r\n    return Math.log2(value) % 1 === 0;\r\n}\r\n\r\n/**\r\n * loads image from source async\r\n * determines if image is mipmapable\r\n * returns a function that accepts a webglrendering context and returns a texture with provided options\r\n * @param src {string}\r\n * @returns {Promise<(gl: WebGLRenderingContext) => Texture>}\r\n */\r\nexport default async function loadTextureAsync(src) {\r\n    const image = await getImage(src);\r\n    const mipmapable = powerOfTwo(image.width) && powerOfTwo(image.height);\r\n\r\n    return (gl, options = {}) => {\r\n        const mipmapableOptions = mipmapable ? options : {\r\n            ...options,\r\n            generateMipmaps: false,\r\n            minFilter: gl.LINEAR,\r\n            wrapS: gl.CLAMP_TO_EDGE,\r\n            wrapT: gl.CLAMP_TO_EDGE,\r\n        };\r\n        const texture = new Texture(gl, {\r\n            ...mipmapableOptions, image\r\n        });\r\n\r\n        if (!!image.close) {\r\n            texture.onUpdate = () => {\r\n                texture.onUpdate = null;\r\n                image.close();\r\n            };\r\n        }\r\n\r\n        return texture;\r\n    };\r\n}","<!-- svelte-ignore tag-option-deprecated -->\r\n<!-- svelte-ignore missing-custom-element-compile-options -->\r\n<svelte:options tag=\"svelte-panorama\" />\r\n\r\n<script context=\"module\">\r\n  import { Renderer, Sphere, Orbit, Mesh } from \"ogl\";\r\n  import { loadTextureAsync, makeCamera, makeProgram } from \"./gl\";\r\n</script>\r\n\r\n<script>\r\n  import { onMount } from \"svelte\";\r\n\r\n  let className = \"\";\r\n  export let alt = \"Panoramic View\";\r\n  export { className as class };\r\n  export let fov = 30;\r\n  /**\r\n   * @type {string}\r\n   */\r\n  export let src;\r\n\r\n  /**\r\n   * @type {HTMLDivElement}\r\n   */\r\n  let wrapper;\r\n  /**\r\n   * @type {HTMLCanvasElement}\r\n   */\r\n  let canvas;\r\n  /**\r\n   * @type {number}\r\n   */\r\n  let raf;\r\n\r\n  onMount(() => {\r\n    const loader = loadTextureAsync(src);\r\n    const { clientWidth, clientHeight } = wrapper;\r\n    const renderer = new Renderer({\r\n      canvas: canvas,\r\n      width: clientWidth,\r\n      height: clientHeight,\r\n    });\r\n\r\n    const gl = renderer.gl;\r\n    gl.clearColor(1, 1, 1, 1);\r\n\r\n    const sphere = new Sphere(gl, {\r\n      radius: 1,\r\n      widthSegments: 64,\r\n    });\r\n    console.log(sphere);\r\n\r\n    const camera = makeCamera(gl, fov, clientWidth, clientHeight);\r\n    const controls = new Orbit(camera, {\r\n      enablePan: false,\r\n      enableZoom: true,\r\n      //zoomStyle: 0,\r\n      element: canvas,\r\n      maxDistance: 1,\r\n      minDistance: 0,\r\n    });\r\n\r\n    const resizeObserver = new ResizeObserver((entries) =>\r\n      entries.every(({ target: { clientWidth, clientHeight } }) => {\r\n        renderer.setSize(clientWidth, clientHeight);\r\n        camera.perspective({ aspect: clientWidth / clientHeight });\r\n      })\r\n    );\r\n    resizeObserver.observe(wrapper);\r\n\r\n    loader.then((loaded) => {\r\n      const texture = loaded(gl);\r\n      const program = makeProgram(gl, texture);\r\n      const scene = new Mesh(gl, {\r\n        geometry: sphere,\r\n        program: program,\r\n      });\r\n\r\n      function update() {\r\n        controls.update();\r\n        renderer.render({ scene: scene, camera: camera });\r\n        raf = requestAnimationFrame(update);\r\n      }\r\n\r\n      raf = requestAnimationFrame(update);\r\n    });\r\n\r\n    return () => {\r\n      cancelAnimationFrame(raf);\r\n      resizeObserver.unobserve(wrapper);\r\n      resizeObserver.disconnect();\r\n    };\r\n  });\r\n</script>\r\n\r\n<div aria-label={alt} class={className} bind:this={wrapper}>\r\n  <canvas bind:this={canvas} />\r\n</div>\r\n\r\n<style>\r\n  div {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n","import { Camera } from \"ogl\";\r\n\r\nexport default function makeCamera(gl, fov, width, height) {\r\n    const camera = new Camera(gl, {\r\n        fov: fov,\r\n        aspect: width / height,\r\n    });\r\n    camera.position.set(0, 0, 1);\r\n    return camera;\r\n}","import { Program } from \"ogl\";\r\n\r\nexport default function makeProgram(gl, texture) {\r\n    return new Program(gl, {\r\n        cullFace: gl.FRONT,\r\n        uniforms: {\r\n            tex: {\r\n                value: texture,\r\n            },\r\n        },\r\n        vertex: /* glsl */`\r\n        attribute vec2 uv;\r\n        attribute vec3 position;\r\n        \r\n        uniform mat4 modelViewMatrix, projectionMatrix;\r\n        \r\n        varying vec2 vUv;\r\n        void main(){\r\n            vUv = vec2(1.0 - uv.s, uv.t);\r\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n        }\r\n        `,\r\n        fragment: /* glsl */`\r\n        #ifdef GL_FRAGMENT_PRECISION_HIGH\r\n            precision highp float;\r\n            precision highp int;\r\n        #else\r\n            precision mediump float;\r\n            precision mediump int;\r\n        #endif\r\n\r\n        uniform sampler2D tex;\r\n        varying vec2 vUv;\r\n\r\n        void main(){\r\n            gl_FragColor = texture2D(tex, vUv);\r\n        }\r\n        `,\r\n    });\r\n}"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","insert","target","node","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","attr","attribute","value","removeAttribute","getAttribute","setAttribute","attribute_to_object","attributes","result","current_component","set_current_component","component","onMount","Error","get_current_component","$$","on_mount","push","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","seen_callbacks","Set","flushidx","flush","saved_component","length","update","e","pop","i","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","destroy_component","detaching","filtered","targets","c","indexOf","flush_render_callbacks","on_destroy","d","make_dirty","then","fill","init","options","instance","create_fragment","not_equal","props","append_styles","parent_component","bound","on_disconnect","context","Map","callbacks","skip_bound","root","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","block","delete","local","customElement","m","new_on_destroy","map","filter","mount_component","SvelteElement","x","y","z","Math","sqrt","copy","out","subtract","scale","squaredLength","normalize","len","dot","cross","ax","ay","az","bx","by","bz","HTMLElement","constructor","super","this","attachShadow","mode","connectedCallback","key","slotted","appendChild","attributeChangedCallback","_oldValue","newValue","disconnectedCallback","$destroy","$on","type","index","splice","$set","$$props","obj","$$set","keys","angle","tempA","tempB","cosine","PI","acos","Vec3","v","set","Vec3Func.set","Vec3Func.copy","va","vb","Vec3Func.add","sub","Vec3Func.subtract","multiply","Vec3Func.scale","divide","inverse","Vec3Func.length","distance","Vec3Func.distance","squaredLen","Vec3Func.squaredLength","squaredDistance","Vec3Func.squaredDistance","negate","Vec3Func.cross","Vec3Func.normalize","Vec3Func.dot","equals","applyMatrix3","mat3","Vec3Func.transformMat3","applyMatrix4","mat4","w","Vec3Func.transformMat4","scaleRotateMatrix4","Vec3Func.scaleRotateMat4","applyQuaternion","q","qx","qy","qz","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","Vec3Func.transformQuat","Vec3Func.angle","lerp","t","Vec3Func.lerp","clone","fromArray","o","toArray","transformDirection","tempVec3","ID","ATTR_ID","isBoundsWarned","Geometry","gl","canvas","console","error","id","VAOs","drawRange","start","count","instancedCount","renderer","bindVertexArray","currentGeometry","glState","state","addAttribute","size","data","Float32Array","FLOAT","Uint16Array","UNSIGNED_SHORT","UNSIGNED_INT","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER","normalized","stride","offset","byteLength","divisor","instanced","needsUpdate","usage","STATIC_DRAW","buffer","updateAttribute","isInstanced","warn","min","max","isNewBuffer","createBuffer","boundBuffer","bindBuffer","bufferData","bufferSubData","setIndex","setDrawRange","setInstancedCount","createVAO","program","attributeOrder","createVertexArray","bindAttributes","attributeLocations","location","numLoc","vertexAttribPointer","enableVertexAttribArray","vertexAttribDivisor","draw","TRIANGLES","indexBytesPerElement","drawElementsInstanced","drawArraysInstanced","drawElements","drawArrays","getPosition","position","computeBoundingBox","array","bounds","center","radius","Infinity","computeBoundingSphere","maxRadiusSq","remove","deleteVertexArray","deleteBuffer","arrayCacheF32","Program","vertex","uniforms","transparent","cullFace","BACK","frontFace","CCW","depthTest","depthWrite","depthFunc","LESS","blendFunc","blendEquation","src","premultipliedAlpha","setBlendFunc","ONE","ONE_MINUS_SRC_ALPHA","SRC_ALPHA","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","getShaderInfoLog","addLineNumbers","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteShader","uniformLocations","numUniforms","ACTIVE_UNIFORMS","uIndex","uniform","getActiveUniform","getUniformLocation","split","match","uniformName","nameComponents","slice","locations","numAttribs","ACTIVE_ATTRIBUTES","aIndex","getActiveAttrib","getAttribLocation","join","dst","srcAlpha","dstAlpha","setBlendEquation","modeRGB","modeAlpha","applyState","enable","DEPTH_TEST","disable","CULL_FACE","BLEND","setCullFace","setFrontFace","setDepthMask","setDepthFunc","use","flipFaces","textureUnit","currentProgram","useProgram","activeUniform","isArray","undefined","texture","setUniform","textureUnits","CW","deleteProgram","arrayLen","valueLen","flatten","setValue","get","arraysEqual","setArray","uniform1fv","uniform1f","uniform2fv","uniform3fv","uniform4fv","uniform1iv","uniform1i","uniform2iv","uniform3iv","uniform4iv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","string","lines","warnCount","message","Renderer","width","height","dpr","alpha","depth","stencil","antialias","preserveDrawingBuffer","powerPreference","autoClear","webgl","color","getContext","isWebgl2","setSize","ZERO","FUNC_ADD","depthMask","premultiplyAlpha","flipY","unpackAlignment","framebuffer","viewport","activeTextureUnit","extensions","getExtension","drawBuffers","parameters","maxTextureUnits","getParameter","MAX_COMBINED_TEXTURE_IMAGE_UNITS","maxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","style","assign","setViewport","setScissor","scissor","blendFuncSeparate","blendEquationSeparate","activeTexture","TEXTURE0","bindFramebuffer","FRAMEBUFFER","extension","webgl2Func","extFunc","bind","sortOpaque","renderOrder","zDepth","sortTransparent","sortUI","getRenderList","scene","camera","frustumCull","sort","renderList","updateFrustum","traverse","visible","frustumCulled","frustumIntersectsMesh","opaque","ui","worldMatrix","getTranslation","projectionViewMatrix","concat","render","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","updateMatrixWorld","aw","bw","Quat","onChange","identity","QuatFunc.set","rotateX","rad","sin","cos","QuatFunc.rotateX","rotateY","QuatFunc.rotateY","rotateZ","QuatFunc.rotateZ","a0","a1","a2","a3","invDot","QuatFunc.invert","conjugate","QuatFunc.copy","QuatFunc.normalize","qA","qB","QuatFunc.multiply","QuatFunc.dot","fromMatrix3","matrix3","fRoot","fTrace","j","k","QuatFunc.fromMat3","fromEuler","euler","order","sx","cx","sy","cy","sz","cz","QuatFunc.fromEuler","fromAxisAngle","axis","s","QuatFunc.setAxisAngle","slerp","omega","cosom","sinom","scale0","scale1","QuatFunc.slerp","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b0","b1","b2","b3","getScaling","mat","m11","m12","m13","m21","m22","m23","m31","m32","m33","hypot","getRotation","temp","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","Mat4","m00","m01","m02","m03","m10","m20","m30","Mat4Func.set","translate","Mat4Func.translate","rotate","b00","b01","b02","b10","b11","b12","b20","b21","b22","abs","Mat4Func.rotate","Mat4Func.scale","ma","mb","Mat4Func.add","Mat4Func.subtract","Mat4Func.multiply","fromPerspective","fov","aspect","near","far","fovy","f","tan","nf","Mat4Func.perspective","fromOrthogonal","left","right","bottom","top","lr","bt","Mat4Func.ortho","fromQuaternion","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","Mat4Func.fromQuat","setPosition","b03","b04","b05","b06","b07","b08","b09","det","Mat4Func.invert","compose","pos","xy","xz","yz","Mat4Func.fromRotationTranslationScale","Mat4Func.getRotation","Mat4Func.getScaling","getMaxScaleOnAxis","Mat4Func.getMaxScaleOnAxis","lookAt","eye","up","eyex","eyey","eyez","upx","upy","upz","z0","z1","x0","x1","Mat4Func.targetTo","determinant","Mat4Func.determinant","tmpMat4","Euler","reorder","fromRotationMatrix","asin","atan2","EulerFunc.fromRotationMatrix","Transform","parent","matrix","matrixAutoUpdate","worldMatrixNeedsUpdate","quaternion","rotation","setParent","notifyParent","addChild","child","notifyChild","force","updateMatrix","decompose","invert","tempMat4","tempVec3a","tempVec3b","Camera","zoom","projectionMatrix","viewMatrix","worldPosition","orthographic","perspective","project","unproject","frustum","constant","invLen","geometry","frustumIntersectsSphere","normal","plane","Mat3","Mat3Func.set","Mat3Func.translate","Mat3Func.rotate","Mat3Func.scale","Mat3Func.multiply","fromMatrix4","Mat3Func.fromQuat","fromBasis","vec3a","vec3b","vec3c","Mat3Func.invert","getNormalMatrix","Mat3Func.normalFromMat4","Mesh","modelViewMatrix","normalMatrix","beforeRenderCallbacks","afterRenderCallbacks","onBeforeRender","onAfterRender","modelMatrix","cameraPosition","mesh","emptyPixel","Uint8Array","isPowerOf2","Texture","image","TEXTURE_2D","UNSIGNED_BYTE","format","RGBA","internalFormat","wrapS","CLAMP_TO_EDGE","wrapT","generateMipmaps","minFilter","NEAREST_MIPMAP_LINEAR","LINEAR","magFilter","anisotropy","level","createTexture","store","REPEAT","bindTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","TEXTURE_CUBE_MAP","texImage2D","TEXTURE_CUBE_MAP_POSITIVE_X","ArrayBuffer","isView","isCompressedTexture","compressedTexImage2D","generateMipmap","onUpdate","Vec2","Vec2Func.set","Vec2Func.add","Vec2Func.subtract","Vec2Func.scale","Vec2Func.length","Vec2Func.squaredLength","Vec2Func.cross","Vec2Func.transformMat4","Vec2Func.lerp","Sphere","widthSegments","heightSegments","ceil","phiStart","phiLength","thetaStart","thetaLength","wSegs","hSegs","pStart","pLength","tStart","tLength","num","numIndices","uv","Uint32Array","iv","ii","te","grid","n","iy","vRow","ix","u","STATE","NONE","ROTATE","DOLLY","PAN","DOLLY_PAN","tempVec2a","tempVec2b","Orbit","object","enabled","ease","inertia","enableRotate","rotateSpeed","autoRotate","autoRotateSpeed","enableZoom","zoomSpeed","zoomStyle","enablePan","panSpeed","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","minDistance","maxDistance","sphericalDelta","phi","theta","sphericalTarget","spherical","panDelta","handleAutoRotate","sinPhiRadius","forcePosition","rotateStart","panStart","dollyStart","getZoomScale","pow","mouseButtons","ORBIT","ZOOM","pan","deltaX","deltaY","el","body","targetDistance","panLeft","clientHeight","panUp","dolly","dollyScale","handleMoveRotate","handleMovePan","onMouseDown","button","clientX","clientY","window","addEventListener","onMouseMove","onMouseUp","handleMouseMoveDolly","removeEventListener","onMouseWheel","stopPropagation","preventDefault","onTouchStart","touches","pageX","pageY","dx","dy","handleTouchStartDollyPan","onTouchMove","handleTouchMoveDollyPan","onTouchEnd","onContextMenu","passive","powerOfTwo","log2","async","loadTextureAsync","response","fetch","blob","createImageBitmap","imageOrientation","reject","urlLoader","URL","webkitURL","objectUrl","createObjectURL","img","Image","onload","revokeObjectURL","onerror","getImage","mipmapable","mipmapableOptions","close","div","append","canvas_1","wrapper","raf","class","className","alt","loader","clientWidth","clearColor","sphere","log","makeCamera","controls","resizeObserver","ResizeObserver","entries","every","observe","loaded","FRONT","tex","makeProgram","requestAnimationFrame","cancelAnimationFrame","unobserve","disconnect","$$value"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]}